#!/usr/bin/env node
"use strict";var Wh=Object.create;var Co=Object.defineProperty;var Yh=Object.getOwnPropertyDescriptor;var Kh=Object.getOwnPropertyNames;var Jh=Object.getPrototypeOf,zh=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kh(t))!zh.call(e,i)&&i!==r&&Co(e,i,{get:()=>t[i],enumerable:!(n=Yh(t,i))||n.enumerable});return e};var Be=(e,t,r)=>(r=e!=null?Wh(Jh(e)):{},Xh(t||!e||!e.__esModule?Co(r,"default",{value:e,enumerable:!0}):r,e));var Oo=d(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.splitWhen=ut.flatten=void 0;function Zh(e){return e.reduce((t,r)=>[].concat(t,r),[])}ut.flatten=Zh;function ep(e,t){let r=[[]],n=0;for(let i of e)t(i)?(n++,r[n]=[]):r[n].push(i);return r}ut.splitWhen=ep});var Ro=d(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.isEnoentCodeError=void 0;function tp(e){return e.code==="ENOENT"}tr.isEnoentCodeError=tp});var To=d(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.createDirentFromStats=void 0;var sn=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function rp(e,t){return new sn(e,t)}rr.createDirentFromStats=rp});var Lo=d(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.convertPosixPathToPattern=Y.convertWindowsPathToPattern=Y.convertPathToPattern=Y.escapePosixPath=Y.escapeWindowsPath=Y.escape=Y.removeLeadingDotSegment=Y.makeAbsolute=Y.unixify=void 0;var np=require("os"),ip=require("path"),Po=np.platform()==="win32",sp=2,op=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,ap=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,up=/^\\\\([.?])/,lp=/\\(?![!()+@[\]{}])/g;function cp(e){return e.replace(/\\/g,"/")}Y.unixify=cp;function fp(e,t){return ip.resolve(e,t)}Y.makeAbsolute=fp;function hp(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(sp)}return e}Y.removeLeadingDotSegment=hp;Y.escape=Po?on:an;function on(e){return e.replace(ap,"\\$2")}Y.escapeWindowsPath=on;function an(e){return e.replace(op,"\\$2")}Y.escapePosixPath=an;Y.convertPathToPattern=Po?ko:Io;function ko(e){return on(e).replace(up,"//$1").replace(lp,"/")}Y.convertWindowsPathToPattern=ko;function Io(e){return an(e)}Y.convertPosixPathToPattern=Io});var Do=d((wA,Mo)=>{"use strict";Mo.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var No=d((CA,Fo)=>{"use strict";var pp=Do(),qo={"{":"}","(":")","[":"]"},dp=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,n=-2,i=-2,s=-2,o=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(o===-1||o>n||(o=e.indexOf("\\",t),o===-1||o>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(o=e.indexOf("\\",t),o===-1||o>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(o=e.indexOf("\\",t),o===-1||o>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(o=e.indexOf("\\",r),o===-1||o>s))))return!0;if(e[t]==="\\"){var a=e[t+1];t+=2;var u=qo[a];if(u){var c=e.indexOf(u,t);c!==-1&&(t=c+1)}if(e[t]==="!")return!0}else t++}return!1},mp=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=qo[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1)}if(e[t]==="!")return!0}else t++}return!1};Fo.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(pp(t))return!0;var n=dp;return r&&r.strict===!1&&(n=mp),n(t)}});var $o=d((OA,Ho)=>{"use strict";var gp=No(),_p=require("path").posix.dirname,yp=require("os").platform()==="win32",un="/",Sp=/\\/g,bp=/[\{\[].*[\}\]]$/,vp=/(^|[^\\])([\{\[]|\([^\)]+$)/,Ap=/\\([\!\*\?\|\[\]\(\)\{\}])/g;Ho.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&yp&&t.indexOf(un)<0&&(t=t.replace(Sp,un)),bp.test(t)&&(t+=un),t+="a";do t=_p(t);while(gp(t)||vp.test(t));return t.replace(Ap,"$1")}});var nr=d(ve=>{"use strict";ve.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;ve.find=(e,t)=>e.nodes.find(r=>r.type===t);ve.exceedsLimit=(e,t,r=1,n)=>n===!1||!ve.isInteger(e)||!ve.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;ve.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};ve.encloseBrace=e=>e.type!=="brace"?!1:e.commas>>0+e.ranges>>0===0?(e.invalid=!0,!0):!1;ve.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:e.commas>>0+e.ranges>>0===0||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;ve.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;ve.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);ve.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];if(Array.isArray(s)){r(s);continue}s!==void 0&&t.push(s)}return t};return r(e),t}});var ir=d((TA,jo)=>{"use strict";var Bo=nr();jo.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&Bo.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a="";if(n.value)return(s||o)&&Bo.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(e)}});var Qo=d((PA,Uo)=>{"use strict";Uo.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var Zo=d((kA,Xo)=>{"use strict";var Go=Qo(),tt=(e,t,r)=>{if(Go(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(Go(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=e+":"+t+"="+i+s+o+a;if(tt.cache.hasOwnProperty(u))return tt.cache[u].result;let c=Math.min(e,t),l=Math.max(e,t);if(Math.abs(c-l)===1){let y=e+"|"+t;return n.capture?`(${y})`:n.wrap===!1?y:`(?:${y})`}let f=zo(e)||zo(t),h={min:e,max:t,a:c,b:l},m=[],p=[];if(f&&(h.isPadded=f,h.maxLen=String(h.max).length),c<0){let y=l<0?Math.abs(l):1;p=Vo(y,Math.abs(c),h,n),c=h.a=0}return l>=0&&(m=Vo(c,l,h,n)),h.negatives=p,h.positives=m,h.result=Ep(p,m,n),n.capture===!0?h.result=`(${h.result})`:n.wrap!==!1&&m.length+p.length>1&&(h.result=`(?:${h.result})`),tt.cache[u]=h,h.result};function Ep(e,t,r){let n=ln(e,t,"-",!1,r)||[],i=ln(t,e,"",!1,r)||[],s=ln(e,t,"-?",!0,r)||[];return n.concat(s).concat(i).join("|")}function xp(e,t){let r=1,n=1,i=Yo(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=Yo(e,r);for(i=Ko(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=Ko(t+1,n)-1;return s=[...s],s.sort(Op),s}function wp(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=Cp(e,t),i=n.length,s="",o=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?s+=u:u!=="0"||c!=="9"?s+=Rp(u,c,r):o++}return o&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function Vo(e,t,r,n){let i=xp(e,t),s=[],o=e,a;for(let u=0;u<i.length;u++){let c=i[u],l=wp(String(o),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+Jo(a.count),o=c+1;continue}r.isPadded&&(f=Tp(c,r,n)),l.string=f+l.pattern+Jo(l.count),s.push(l),o=c+1,a=l}return s}function ln(e,t,r,n,i){let s=[];for(let o of e){let{string:a}=o;!n&&!Wo(t,"string",a)&&s.push(r+a),n&&Wo(t,"string",a)&&s.push(r+a)}return s}function Cp(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function Op(e,t){return e>t?1:t>e?-1:0}function Wo(e,t,r){return e.some(n=>n[t]===r)}function Yo(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function Ko(e,t){return e-e%Math.pow(10,t)}function Jo(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function Rp(e,t,r){return`[${e}${t-e===1?"":"-"}${t}]`}function zo(e){return/^-?(0+)\d/.test(e)}function Tp(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}tt.cache={};tt.clearCache=()=>tt.cache={};Xo.exports=tt});var hn=d((IA,oa)=>{"use strict";var Pp=require("util"),ta=Zo(),ea=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),kp=e=>t=>e===!0?Number(t):String(t),cn=e=>typeof e=="number"||typeof e=="string"&&e!=="",Pt=e=>Number.isInteger(+e),fn=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},Ip=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,Lp=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return r===!1?String(e):e},or=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},Mp=(e,t,r)=>{e.negatives.sort((a,u)=>a<u?-1:a>u?1:0),e.positives.sort((a,u)=>a<u?-1:a>u?1:0);let n=t.capture?"":"?:",i="",s="",o;return e.positives.length&&(i=e.positives.map(a=>or(String(a),r)).join("|")),e.negatives.length&&(s=`-(${n}${e.negatives.map(a=>or(String(a),r)).join("|")})`),i&&s?o=`${i}|${s}`:o=i||s,t.wrap?`(${n}${o})`:o},ra=(e,t,r,n)=>{if(r)return ta(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return`[${i}-${s}]`},na=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return ta(e,t,r)},ia=(...e)=>new RangeError("Invalid range arguments: "+Pp.inspect(...e)),sa=(e,t,r)=>{if(r.strictRanges===!0)throw ia([e,t]);return[]},Dp=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},qp=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw ia([e,t]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(e),u=String(t),c=String(r);r=Math.max(Math.abs(r),1);let l=fn(a)||fn(u)||fn(c),f=l?Math.max(a.length,u.length,c.length):0,h=l===!1&&Ip(e,t,n)===!1,m=n.transform||kp(h);if(n.toRegex&&r===1)return ra(or(e,f),or(t,f),!0,n);let p={negatives:[],positives:[]},y=v=>p[v<0?"negatives":"positives"].push(Math.abs(v)),x=[],C=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?y(i):x.push(Lp(m(i,C),f,h)),i=o?i-r:i+r,C++;return n.toRegex===!0?r>1?Mp(p,n,f):na(x,null,{wrap:!1,...n}):x},Fp=(e,t,r=1,n={})=>{if(!Pt(e)&&e.length>1||!Pt(t)&&t.length>1)return sa(e,t,n);let i=n.transform||(h=>String.fromCharCode(h)),s=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=s>o,u=Math.min(s,o),c=Math.max(s,o);if(n.toRegex&&r===1)return ra(u,c,!1,n);let l=[],f=0;for(;a?s>=o:s<=o;)l.push(i(s,f)),s=a?s-r:s+r,f++;return n.toRegex===!0?na(l,null,{wrap:!1,options:n}):l},sr=(e,t,r,n={})=>{if(t==null&&cn(e))return[e];if(!cn(e)||!cn(t))return sa(e,t,n);if(typeof r=="function")return sr(e,t,1,{transform:r});if(ea(r))return sr(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,Pt(r)?Pt(e)&&Pt(t)?qp(e,t,r,i):Fp(e,t,Math.max(Math.abs(r),1),i):r!=null&&!ea(r)?Dp(r,i):sr(e,t,1,r)};oa.exports=sr});var la=d((LA,ua)=>{"use strict";var Np=hn(),aa=nr(),Hp=(e,t={})=>{let r=(n,i={})=>{let s=aa.isInvalidBrace(i),o=n.invalid===!0&&t.escapeInvalid===!0,a=s===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0)return u+n.value;if(n.isClose===!0)return console.log("node.isClose",u,n.value),u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=aa.reduce(n.nodes),f=Np(...l,{...t,wrap:!1,toRegex:!0,strictZeros:!0});if(f.length!==0)return l.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(e)};ua.exports=Hp});var ha=d((MA,fa)=>{"use strict";var $p=hn(),ca=ir(),lt=nr(),rt=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?lt.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(rt(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?rt(i,s,r):i+s);return lt.flatten(n)},Bp=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(rt(a.pop(),ca(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(rt(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=lt.reduce(i.nodes);if(lt.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let h=$p(...f,t);h.length===0&&(h=ca(i,t)),a.push(rt(a.pop(),h)),i.nodes=[];return}let u=lt.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let f=0;f<i.nodes.length;f++){let h=i.nodes[f];if(h.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(h.type==="close"){a.push(rt(a.pop(),c,u));continue}if(h.value&&h.type!=="open"){c.push(rt(c.pop(),h.value));continue}h.nodes&&n(h,i)}return c};return lt.flatten(n(e))};fa.exports=Bp});var da=d((DA,pa)=>{"use strict";pa.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Sa=d((qA,ya)=>{"use strict";var jp=ir(),{MAX_LENGTH:ma,CHAR_BACKSLASH:pn,CHAR_BACKTICK:Up,CHAR_COMMA:Qp,CHAR_DOT:Gp,CHAR_LEFT_PARENTHESES:Vp,CHAR_RIGHT_PARENTHESES:Wp,CHAR_LEFT_CURLY_BRACE:Yp,CHAR_RIGHT_CURLY_BRACE:Kp,CHAR_LEFT_SQUARE_BRACKET:ga,CHAR_RIGHT_SQUARE_BRACKET:_a,CHAR_DOUBLE_QUOTE:Jp,CHAR_SINGLE_QUOTE:zp,CHAR_NO_BREAK_SPACE:Xp,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Zp}=da(),ed=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(ma,r.maxLength):ma;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],o=i,a=i,u=0,c=e.length,l=0,f=0,h,m=()=>e[l++],p=y=>{if(y.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&y.type==="text"){a.value+=y.value;return}return o.nodes.push(y),y.parent=o,y.prev=a,a=y,y};for(p({type:"bos"});l<c;)if(o=s[s.length-1],h=m(),!(h===Zp||h===Xp)){if(h===pn){p({type:"text",value:(t.keepEscaping?h:"")+m()});continue}if(h===_a){p({type:"text",value:"\\"+h});continue}if(h===ga){u++;let y;for(;l<c&&(y=m());){if(h+=y,y===ga){u++;continue}if(y===pn){h+=m();continue}if(y===_a&&(u--,u===0))break}p({type:"text",value:h});continue}if(h===Vp){o=p({type:"paren",nodes:[]}),s.push(o),p({type:"text",value:h});continue}if(h===Wp){if(o.type!=="paren"){p({type:"text",value:h});continue}o=s.pop(),p({type:"text",value:h}),o=s[s.length-1];continue}if(h===Jp||h===zp||h===Up){let y=h,x;for(t.keepQuotes!==!0&&(h="");l<c&&(x=m());){if(x===pn){h+=x+m();continue}if(x===y){t.keepQuotes===!0&&(h+=x);break}h+=x}p({type:"text",value:h});continue}if(h===Yp){f++;let x={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};o=p(x),s.push(o),p({type:"open",value:h});continue}if(h===Kp){if(o.type!=="brace"){p({type:"text",value:h});continue}let y="close";o=s.pop(),o.close=!0,p({type:y,value:h}),f--,o=s[s.length-1];continue}if(h===Qp&&f>0){if(o.ranges>0){o.ranges=0;let y=o.nodes.shift();o.nodes=[y,{type:"text",value:jp(o)}]}p({type:"comma",value:h}),o.commas++;continue}if(h===Gp&&f>0&&o.commas===0){let y=o.nodes;if(f===0||y.length===0){p({type:"text",value:h});continue}if(a.type==="dot"){if(o.range=[],a.value+=h,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){y.pop();let x=y[y.length-1];x.value+=a.value+h,a=x,o.ranges--;continue}p({type:"dot",value:h});continue}p({type:"text",value:h})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(C=>{C.nodes||(C.type==="open"&&(C.isOpen=!0),C.type==="close"&&(C.isClose=!0),C.nodes||(C.type="text"),C.invalid=!0)});let y=s[s.length-1],x=y.nodes.indexOf(o);y.nodes.splice(x,1,...o.nodes)}while(s.length>0);return p({type:"eos"}),i};ya.exports=ed});var Aa=d((FA,va)=>{"use strict";var ba=ir(),td=la(),rd=ha(),nd=Sa(),_e=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=_e.create(n,t);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(_e.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};_e.parse=(e,t={})=>nd(e,t);_e.stringify=(e,t={})=>ba(typeof e=="string"?_e.parse(e,t):e,t);_e.compile=(e,t={})=>(typeof e=="string"&&(e=_e.parse(e,t)),td(e,t));_e.expand=(e,t={})=>{typeof e=="string"&&(e=_e.parse(e,t));let r=rd(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};_e.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?_e.compile(e,t):_e.expand(e,t);va.exports=_e});var kt=d((NA,Oa)=>{"use strict";var id=require("path"),Pe="\\\\/",Ea=`[^${Pe}]`,De="\\.",sd="\\+",od="\\?",ar="\\/",ad="(?=.)",xa="[^/]",dn=`(?:${ar}|$)`,wa=`(?:^|${ar})`,mn=`${De}{1,2}${dn}`,ud=`(?!${De})`,ld=`(?!${wa}${mn})`,cd=`(?!${De}{0,1}${dn})`,fd=`(?!${mn})`,hd=`[^.${ar}]`,pd=`${xa}*?`,Ca={DOT_LITERAL:De,PLUS_LITERAL:sd,QMARK_LITERAL:od,SLASH_LITERAL:ar,ONE_CHAR:ad,QMARK:xa,END_ANCHOR:dn,DOTS_SLASH:mn,NO_DOT:ud,NO_DOTS:ld,NO_DOT_SLASH:cd,NO_DOTS_SLASH:fd,QMARK_NO_DOT:hd,STAR:pd,START_ANCHOR:wa},dd={...Ca,SLASH_LITERAL:`[${Pe}]`,QMARK:Ea,STAR:`${Ea}*?`,DOTS_SLASH:`${De}{1,2}(?:[${Pe}]|$)`,NO_DOT:`(?!${De})`,NO_DOTS:`(?!(?:^|[${Pe}])${De}{1,2}(?:[${Pe}]|$))`,NO_DOT_SLASH:`(?!${De}{0,1}(?:[${Pe}]|$))`,NO_DOTS_SLASH:`(?!${De}{1,2}(?:[${Pe}]|$))`,QMARK_NO_DOT:`[^.${Pe}]`,START_ANCHOR:`(?:^|[${Pe}])`,END_ANCHOR:`(?:[${Pe}]|$)`},md={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Oa.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:md,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:id.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?dd:Ca}}});var It=d(ce=>{"use strict";var gd=require("path"),_d=process.platform==="win32",{REGEX_BACKSLASH:yd,REGEX_REMOVE_BACKSLASH:Sd,REGEX_SPECIAL_CHARS:bd,REGEX_SPECIAL_CHARS_GLOBAL:vd}=kt();ce.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);ce.hasRegexChars=e=>bd.test(e);ce.isRegexChar=e=>e.length===1&&ce.hasRegexChars(e);ce.escapeRegex=e=>e.replace(vd,"\\$1");ce.toPosixSlashes=e=>e.replace(yd,"/");ce.removeBackslashes=e=>e.replace(Sd,t=>t==="\\"?"":t);ce.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};ce.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:_d===!0||gd.sep==="\\";ce.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?ce.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};ce.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};ce.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s}});var Da=d(($A,Ma)=>{"use strict";var Ra=It(),{CHAR_ASTERISK:gn,CHAR_AT:Ad,CHAR_BACKWARD_SLASH:Lt,CHAR_COMMA:Ed,CHAR_DOT:_n,CHAR_EXCLAMATION_MARK:yn,CHAR_FORWARD_SLASH:La,CHAR_LEFT_CURLY_BRACE:Sn,CHAR_LEFT_PARENTHESES:bn,CHAR_LEFT_SQUARE_BRACKET:xd,CHAR_PLUS:wd,CHAR_QUESTION_MARK:Ta,CHAR_RIGHT_CURLY_BRACE:Cd,CHAR_RIGHT_PARENTHESES:Pa,CHAR_RIGHT_SQUARE_BRACKET:Od}=kt(),ka=e=>e===La||e===Lt,Ia=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},Rd=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],o=[],a=[],u=e,c=-1,l=0,f=0,h=!1,m=!1,p=!1,y=!1,x=!1,C=!1,v=!1,L=!1,re=!1,$=!1,w=0,I,A,M={value:"",depth:0,isGlob:!1},J=()=>c>=n,S=()=>u.charCodeAt(c+1),B=()=>(I=A,u.charCodeAt(++c));for(;c<n;){A=B();let oe;if(A===Lt){v=M.backslashes=!0,A=B(),A===Sn&&(C=!0);continue}if(C===!0||A===Sn){for(w++;J()!==!0&&(A=B());){if(A===Lt){v=M.backslashes=!0,B();continue}if(A===Sn){w++;continue}if(C!==!0&&A===_n&&(A=B())===_n){if(h=M.isBrace=!0,p=M.isGlob=!0,$=!0,i===!0)continue;break}if(C!==!0&&A===Ed){if(h=M.isBrace=!0,p=M.isGlob=!0,$=!0,i===!0)continue;break}if(A===Cd&&(w--,w===0)){C=!1,h=M.isBrace=!0,$=!0;break}}if(i===!0)continue;break}if(A===La){if(s.push(c),o.push(M),M={value:"",depth:0,isGlob:!1},$===!0)continue;if(I===_n&&c===l+1){l+=2;continue}f=c+1;continue}if(r.noext!==!0&&(A===wd||A===Ad||A===gn||A===Ta||A===yn)===!0&&S()===bn){if(p=M.isGlob=!0,y=M.isExtglob=!0,$=!0,A===yn&&c===l&&(re=!0),i===!0){for(;J()!==!0&&(A=B());){if(A===Lt){v=M.backslashes=!0,A=B();continue}if(A===Pa){p=M.isGlob=!0,$=!0;break}}continue}break}if(A===gn){if(I===gn&&(x=M.isGlobstar=!0),p=M.isGlob=!0,$=!0,i===!0)continue;break}if(A===Ta){if(p=M.isGlob=!0,$=!0,i===!0)continue;break}if(A===xd){for(;J()!==!0&&(oe=B());){if(oe===Lt){v=M.backslashes=!0,B();continue}if(oe===Od){m=M.isBracket=!0,p=M.isGlob=!0,$=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&A===yn&&c===l){L=M.negated=!0,l++;continue}if(r.noparen!==!0&&A===bn){if(p=M.isGlob=!0,i===!0){for(;J()!==!0&&(A=B());){if(A===bn){v=M.backslashes=!0,A=B();continue}if(A===Pa){$=!0;break}}continue}break}if(p===!0){if($=!0,i===!0)continue;break}}r.noext===!0&&(y=!1,p=!1);let F=u,$e="",g="";l>0&&($e=u.slice(0,l),u=u.slice(l),f-=l),F&&p===!0&&f>0?(F=u.slice(0,f),g=u.slice(f)):p===!0?(F="",g=u):F=u,F&&F!==""&&F!=="/"&&F!==u&&ka(F.charCodeAt(F.length-1))&&(F=F.slice(0,-1)),r.unescape===!0&&(g&&(g=Ra.removeBackslashes(g)),F&&v===!0&&(F=Ra.removeBackslashes(F)));let _={prefix:$e,input:e,start:l,base:F,glob:g,isBrace:h,isBracket:m,isGlob:p,isExtglob:y,isGlobstar:x,negated:L,negatedExtglob:re};if(r.tokens===!0&&(_.maxDepth=0,ka(A)||o.push(M),_.tokens=o),r.parts===!0||r.tokens===!0){let oe;for(let D=0;D<s.length;D++){let Re=oe?oe+1:l,Te=s[D],ge=e.slice(Re,Te);r.tokens&&(D===0&&l!==0?(o[D].isPrefix=!0,o[D].value=$e):o[D].value=ge,Ia(o[D]),_.maxDepth+=o[D].depth),(D!==0||ge!=="")&&a.push(ge),oe=Te}if(oe&&oe+1<e.length){let D=e.slice(oe+1);a.push(D),r.tokens&&(o[o.length-1].value=D,Ia(o[o.length-1]),_.maxDepth+=o[o.length-1].depth)}_.slashes=s,_.parts=a}return _};Ma.exports=Rd});var Na=d((BA,Fa)=>{"use strict";var ur=kt(),ye=It(),{MAX_LENGTH:lr,POSIX_REGEX_SOURCE:Td,REGEX_NON_SPECIAL_CHARS:Pd,REGEX_SPECIAL_CHARS_BACKREF:kd,REPLACEMENTS:qa}=ur,Id=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(i=>ye.escapeRegex(i)).join("..")}return r},ct=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,vn=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=qa[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(lr,r.maxLength):lr,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},o=[s],a=r.capture?"":"?:",u=ye.isWindows(t),c=ur.globChars(u),l=ur.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:h,SLASH_LITERAL:m,ONE_CHAR:p,DOTS_SLASH:y,NO_DOT:x,NO_DOT_SLASH:C,NO_DOTS_SLASH:v,QMARK:L,QMARK_NO_DOT:re,STAR:$,START_ANCHOR:w}=c,I=E=>`(${a}(?:(?!${w}${E.dot?y:f}).)*?)`,A=r.dot?"":x,M=r.dot?L:re,J=r.bash===!0?I(r):$;r.capture&&(J=`(${J})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let S={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=ye.removePrefix(e,S),i=e.length;let B=[],F=[],$e=[],g=s,_,oe=()=>S.index===i-1,D=S.peek=(E=1)=>e[S.index+E],Re=S.advance=()=>e[++S.index]||"",Te=()=>e.slice(S.index+1),ge=(E="",N=0)=>{S.consumed+=E,S.index+=N},zt=E=>{S.output+=E.output!=null?E.output:E.value,ge(E.value)},Gh=()=>{let E=1;for(;D()==="!"&&(D(2)!=="("||D(3)==="?");)Re(),S.start++,E++;return E%2===0?!1:(S.negated=!0,S.start++,!0)},Xt=E=>{S[E]++,$e.push(E)},et=E=>{S[E]--,$e.pop()},k=E=>{if(g.type==="globstar"){let N=S.braces>0&&(E.type==="comma"||E.type==="brace"),b=E.extglob===!0||B.length&&(E.type==="pipe"||E.type==="paren");E.type!=="slash"&&E.type!=="paren"&&!N&&!b&&(S.output=S.output.slice(0,-g.output.length),g.type="star",g.value="*",g.output=J,S.output+=g.output)}if(B.length&&E.type!=="paren"&&(B[B.length-1].inner+=E.value),(E.value||E.output)&&zt(E),g&&g.type==="text"&&E.type==="text"){g.value+=E.value,g.output=(g.output||"")+E.value;return}E.prev=g,o.push(E),g=E},Zt=(E,N)=>{let b={...l[N],conditions:1,inner:""};b.prev=g,b.parens=S.parens,b.output=S.output;let P=(r.capture?"(":"")+b.open;Xt("parens"),k({type:E,value:N,output:S.output?"":p}),k({type:"paren",extglob:!0,value:Re(),output:P}),B.push(b)},Vh=E=>{let N=E.close+(r.capture?")":""),b;if(E.type==="negate"){let P=J;if(E.inner&&E.inner.length>1&&E.inner.includes("/")&&(P=I(r)),(P!==J||oe()||/^\)+$/.test(Te()))&&(N=E.close=`)$))${P}`),E.inner.includes("*")&&(b=Te())&&/^\.[^\\/.]+$/.test(b)){let Q=vn(b,{...t,fastpaths:!1}).output;N=E.close=`)${Q})${P})`}E.prev.type==="bos"&&(S.negatedExtglob=!0)}k({type:"paren",extglob:!0,value:_,output:N}),et("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let E=!1,N=e.replace(kd,(b,P,Q,ae,z,nn)=>ae==="\\"?(E=!0,b):ae==="?"?P?P+ae+(z?L.repeat(z.length):""):nn===0?M+(z?L.repeat(z.length):""):L.repeat(Q.length):ae==="."?f.repeat(Q.length):ae==="*"?P?P+ae+(z?J:""):J:P?b:`\\${b}`);return E===!0&&(r.unescape===!0?N=N.replace(/\\/g,""):N=N.replace(/\\+/g,b=>b.length%2===0?"\\\\":b?"\\":"")),N===e&&r.contains===!0?(S.output=e,S):(S.output=ye.wrapOutput(N,S,t),S)}for(;!oe();){if(_=Re(),_==="\0")continue;if(_==="\\"){let b=D();if(b==="/"&&r.bash!==!0||b==="."||b===";")continue;if(!b){_+="\\",k({type:"text",value:_});continue}let P=/^\\+/.exec(Te()),Q=0;if(P&&P[0].length>2&&(Q=P[0].length,S.index+=Q,Q%2!==0&&(_+="\\")),r.unescape===!0?_=Re():_+=Re(),S.brackets===0){k({type:"text",value:_});continue}}if(S.brackets>0&&(_!=="]"||g.value==="["||g.value==="[^")){if(r.posix!==!1&&_===":"){let b=g.value.slice(1);if(b.includes("[")&&(g.posix=!0,b.includes(":"))){let P=g.value.lastIndexOf("["),Q=g.value.slice(0,P),ae=g.value.slice(P+2),z=Td[ae];if(z){g.value=Q+z,S.backtrack=!0,Re(),!s.output&&o.indexOf(g)===1&&(s.output=p);continue}}}(_==="["&&D()!==":"||_==="-"&&D()==="]")&&(_=`\\${_}`),_==="]"&&(g.value==="["||g.value==="[^")&&(_=`\\${_}`),r.posix===!0&&_==="!"&&g.value==="["&&(_="^"),g.value+=_,zt({value:_});continue}if(S.quotes===1&&_!=='"'){_=ye.escapeRegex(_),g.value+=_,zt({value:_});continue}if(_==='"'){S.quotes=S.quotes===1?0:1,r.keepQuotes===!0&&k({type:"text",value:_});continue}if(_==="("){Xt("parens"),k({type:"paren",value:_});continue}if(_===")"){if(S.parens===0&&r.strictBrackets===!0)throw new SyntaxError(ct("opening","("));let b=B[B.length-1];if(b&&S.parens===b.parens+1){Vh(B.pop());continue}k({type:"paren",value:_,output:S.parens?")":"\\)"}),et("parens");continue}if(_==="["){if(r.nobracket===!0||!Te().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(ct("closing","]"));_=`\\${_}`}else Xt("brackets");k({type:"bracket",value:_});continue}if(_==="]"){if(r.nobracket===!0||g&&g.type==="bracket"&&g.value.length===1){k({type:"text",value:_,output:`\\${_}`});continue}if(S.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(ct("opening","["));k({type:"text",value:_,output:`\\${_}`});continue}et("brackets");let b=g.value.slice(1);if(g.posix!==!0&&b[0]==="^"&&!b.includes("/")&&(_=`/${_}`),g.value+=_,zt({value:_}),r.literalBrackets===!1||ye.hasRegexChars(b))continue;let P=ye.escapeRegex(g.value);if(S.output=S.output.slice(0,-g.value.length),r.literalBrackets===!0){S.output+=P,g.value=P;continue}g.value=`(${a}${P}|${g.value})`,S.output+=g.value;continue}if(_==="{"&&r.nobrace!==!0){Xt("braces");let b={type:"brace",value:_,output:"(",outputIndex:S.output.length,tokensIndex:S.tokens.length};F.push(b),k(b);continue}if(_==="}"){let b=F[F.length-1];if(r.nobrace===!0||!b){k({type:"text",value:_,output:_});continue}let P=")";if(b.dots===!0){let Q=o.slice(),ae=[];for(let z=Q.length-1;z>=0&&(o.pop(),Q[z].type!=="brace");z--)Q[z].type!=="dots"&&ae.unshift(Q[z].value);P=Id(ae,r),S.backtrack=!0}if(b.comma!==!0&&b.dots!==!0){let Q=S.output.slice(0,b.outputIndex),ae=S.tokens.slice(b.tokensIndex);b.value=b.output="\\{",_=P="\\}",S.output=Q;for(let z of ae)S.output+=z.output||z.value}k({type:"brace",value:_,output:P}),et("braces"),F.pop();continue}if(_==="|"){B.length>0&&B[B.length-1].conditions++,k({type:"text",value:_});continue}if(_===","){let b=_,P=F[F.length-1];P&&$e[$e.length-1]==="braces"&&(P.comma=!0,b="|"),k({type:"comma",value:_,output:b});continue}if(_==="/"){if(g.type==="dot"&&S.index===S.start+1){S.start=S.index+1,S.consumed="",S.output="",o.pop(),g=s;continue}k({type:"slash",value:_,output:m});continue}if(_==="."){if(S.braces>0&&g.type==="dot"){g.value==="."&&(g.output=f);let b=F[F.length-1];g.type="dots",g.output+=_,g.value+=_,b.dots=!0;continue}if(S.braces+S.parens===0&&g.type!=="bos"&&g.type!=="slash"){k({type:"text",value:_,output:f});continue}k({type:"dot",value:_,output:f});continue}if(_==="?"){if(!(g&&g.value==="(")&&r.noextglob!==!0&&D()==="("&&D(2)!=="?"){Zt("qmark",_);continue}if(g&&g.type==="paren"){let P=D(),Q=_;if(P==="<"&&!ye.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(g.value==="("&&!/[!=<:]/.test(P)||P==="<"&&!/<([!=]|\w+>)/.test(Te()))&&(Q=`\\${_}`),k({type:"text",value:_,output:Q});continue}if(r.dot!==!0&&(g.type==="slash"||g.type==="bos")){k({type:"qmark",value:_,output:re});continue}k({type:"qmark",value:_,output:L});continue}if(_==="!"){if(r.noextglob!==!0&&D()==="("&&(D(2)!=="?"||!/[!=<:]/.test(D(3)))){Zt("negate",_);continue}if(r.nonegate!==!0&&S.index===0){Gh();continue}}if(_==="+"){if(r.noextglob!==!0&&D()==="("&&D(2)!=="?"){Zt("plus",_);continue}if(g&&g.value==="("||r.regex===!1){k({type:"plus",value:_,output:h});continue}if(g&&(g.type==="bracket"||g.type==="paren"||g.type==="brace")||S.parens>0){k({type:"plus",value:_});continue}k({type:"plus",value:h});continue}if(_==="@"){if(r.noextglob!==!0&&D()==="("&&D(2)!=="?"){k({type:"at",extglob:!0,value:_,output:""});continue}k({type:"text",value:_});continue}if(_!=="*"){(_==="$"||_==="^")&&(_=`\\${_}`);let b=Pd.exec(Te());b&&(_+=b[0],S.index+=b[0].length),k({type:"text",value:_});continue}if(g&&(g.type==="globstar"||g.star===!0)){g.type="star",g.star=!0,g.value+=_,g.output=J,S.backtrack=!0,S.globstar=!0,ge(_);continue}let E=Te();if(r.noextglob!==!0&&/^\([^?]/.test(E)){Zt("star",_);continue}if(g.type==="star"){if(r.noglobstar===!0){ge(_);continue}let b=g.prev,P=b.prev,Q=b.type==="slash"||b.type==="bos",ae=P&&(P.type==="star"||P.type==="globstar");if(r.bash===!0&&(!Q||E[0]&&E[0]!=="/")){k({type:"star",value:_,output:""});continue}let z=S.braces>0&&(b.type==="comma"||b.type==="brace"),nn=B.length&&(b.type==="pipe"||b.type==="paren");if(!Q&&b.type!=="paren"&&!z&&!nn){k({type:"star",value:_,output:""});continue}for(;E.slice(0,3)==="/**";){let er=e[S.index+4];if(er&&er!=="/")break;E=E.slice(3),ge("/**",3)}if(b.type==="bos"&&oe()){g.type="globstar",g.value+=_,g.output=I(r),S.output=g.output,S.globstar=!0,ge(_);continue}if(b.type==="slash"&&b.prev.type!=="bos"&&!ae&&oe()){S.output=S.output.slice(0,-(b.output+g.output).length),b.output=`(?:${b.output}`,g.type="globstar",g.output=I(r)+(r.strictSlashes?")":"|$)"),g.value+=_,S.globstar=!0,S.output+=b.output+g.output,ge(_);continue}if(b.type==="slash"&&b.prev.type!=="bos"&&E[0]==="/"){let er=E[1]!==void 0?"|$":"";S.output=S.output.slice(0,-(b.output+g.output).length),b.output=`(?:${b.output}`,g.type="globstar",g.output=`${I(r)}${m}|${m}${er})`,g.value+=_,S.output+=b.output+g.output,S.globstar=!0,ge(_+Re()),k({type:"slash",value:"/",output:""});continue}if(b.type==="bos"&&E[0]==="/"){g.type="globstar",g.value+=_,g.output=`(?:^|${m}|${I(r)}${m})`,S.output=g.output,S.globstar=!0,ge(_+Re()),k({type:"slash",value:"/",output:""});continue}S.output=S.output.slice(0,-g.output.length),g.type="globstar",g.output=I(r),g.value+=_,S.output+=g.output,S.globstar=!0,ge(_);continue}let N={type:"star",value:_,output:J};if(r.bash===!0){N.output=".*?",(g.type==="bos"||g.type==="slash")&&(N.output=A+N.output),k(N);continue}if(g&&(g.type==="bracket"||g.type==="paren")&&r.regex===!0){N.output=_,k(N);continue}(S.index===S.start||g.type==="slash"||g.type==="dot")&&(g.type==="dot"?(S.output+=C,g.output+=C):r.dot===!0?(S.output+=v,g.output+=v):(S.output+=A,g.output+=A),D()!=="*"&&(S.output+=p,g.output+=p)),k(N)}for(;S.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(ct("closing","]"));S.output=ye.escapeLast(S.output,"["),et("brackets")}for(;S.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(ct("closing",")"));S.output=ye.escapeLast(S.output,"("),et("parens")}for(;S.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(ct("closing","}"));S.output=ye.escapeLast(S.output,"{"),et("braces")}if(r.strictSlashes!==!0&&(g.type==="star"||g.type==="bracket")&&k({type:"maybe_slash",value:"",output:`${m}?`}),S.backtrack===!0){S.output="";for(let E of S.tokens)S.output+=E.output!=null?E.output:E.value,E.suffix&&(S.output+=E.suffix)}return S};vn.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(lr,r.maxLength):lr,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=qa[e]||e;let s=ye.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:f,NO_DOTS_SLASH:h,STAR:m,START_ANCHOR:p}=ur.globChars(s),y=r.dot?f:l,x=r.dot?h:l,C=r.capture?"":"?:",v={negated:!1,prefix:""},L=r.bash===!0?".*?":m;r.capture&&(L=`(${L})`);let re=A=>A.noglobstar===!0?L:`(${C}(?:(?!${p}${A.dot?c:o}).)*?)`,$=A=>{switch(A){case"*":return`${y}${u}${L}`;case".*":return`${o}${u}${L}`;case"*.*":return`${y}${L}${o}${u}${L}`;case"*/*":return`${y}${L}${a}${u}${x}${L}`;case"**":return y+re(r);case"**/*":return`(?:${y}${re(r)}${a})?${x}${u}${L}`;case"**/*.*":return`(?:${y}${re(r)}${a})?${x}${L}${o}${u}${L}`;case"**/.*":return`(?:${y}${re(r)}${a})?${o}${u}${L}`;default:{let M=/^(.*?)\.(\w+)$/.exec(A);if(!M)return;let J=$(M[1]);return J?J+o+M[2]:void 0}}},w=ye.removePrefix(e,v),I=$(w);return I&&r.strictSlashes!==!0&&(I+=`${a}?`),I};Fa.exports=vn});var $a=d((jA,Ha)=>{"use strict";var Ld=require("path"),Md=Da(),An=Na(),En=It(),Dd=kt(),qd=e=>e&&typeof e=="object"&&!Array.isArray(e),W=(e,t,r=!1)=>{if(Array.isArray(e)){let l=e.map(h=>W(h,t,r));return h=>{for(let m of l){let p=m(h);if(p)return p}return!1}}let n=qd(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=En.isWindows(t),o=n?W.compileRe(e,t):W.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(i.ignore){let l={...t,ignore:null,onMatch:null,onResult:null};u=W(i.ignore,l,r)}let c=(l,f=!1)=>{let{isMatch:h,match:m,output:p}=W.test(l,o,t,{glob:e,posix:s}),y={glob:e,state:a,regex:o,posix:s,input:l,output:p,match:m,isMatch:h};return typeof i.onResult=="function"&&i.onResult(y),h===!1?(y.isMatch=!1,f?y:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(y),y.isMatch=!1,f?y:!1):(typeof i.onMatch=="function"&&i.onMatch(y),f?y:!0)};return r&&(c.state=a),c};W.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let s=r||{},o=s.format||(i?En.toPosixSlashes:null),a=e===n,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===n),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=W.matchBase(e,t,r,i):a=t.exec(u)),{isMatch:!!a,match:a,output:u}};W.matchBase=(e,t,r,n=En.isWindows(r))=>(t instanceof RegExp?t:W.makeRe(t,r)).test(Ld.basename(e));W.isMatch=(e,t,r)=>W(t,r)(e);W.parse=(e,t)=>Array.isArray(e)?e.map(r=>W.parse(r,t)):An(e,{...t,fastpaths:!1});W.scan=(e,t)=>Md(e,t);W.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",o=i.contains?"":"$",a=`${s}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=W.toRegex(a,t);return n===!0&&(u.state=e),u};W.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=An.fastpaths(e,t)),i.output||(i=An(e,t)),W.compileRe(i,t,r,n)};W.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};W.constants=Dd;Ha.exports=W});var ja=d((UA,Ba)=>{"use strict";Ba.exports=$a()});var Ya=d((QA,Wa)=>{"use strict";var Qa=require("util"),Ga=Aa(),ke=ja(),xn=It(),Ua=e=>e===""||e==="./",Va=e=>{let t=e.indexOf("{");return t>-1&&e.indexOf("}",t)>-1},H=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,s=new Set,o=0,a=l=>{s.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<t.length;l++){let f=ke(String(t[l]),{...r,onResult:a},!0),h=f.state.negated||f.state.negatedExtglob;h&&o++;for(let m of e){let p=f(m,!0);(h?!p.isMatch:p.isMatch)&&(h?n.add(p.output):(n.delete(p.output),i.add(p.output)))}}let c=(o===t.length?[...s]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(l=>l.replace(/\\/g,"")):t}return c};H.match=H;H.matcher=(e,t)=>ke(e,t);H.isMatch=(e,t,r)=>ke(t,r)(e);H.any=H.isMatch;H.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],s=a=>{r.onResult&&r.onResult(a),i.push(a.output)},o=new Set(H(e,t,{...r,onResult:s}));for(let a of i)o.has(a)||n.add(a);return[...n]};H.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Qa.inspect(e)}"`);if(Array.isArray(t))return t.some(n=>H.contains(e,n,r));if(typeof t=="string"){if(Ua(e)||Ua(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return H.isMatch(e,t,{...r,contains:!0})};H.matchKeys=(e,t,r)=>{if(!xn.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=H(Object.keys(e),t,r),i={};for(let s of n)i[s]=e[s];return i};H.some=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=ke(String(i),r);if(n.some(o=>s(o)))return!0}return!1};H.every=(e,t,r)=>{let n=[].concat(e);for(let i of[].concat(t)){let s=ke(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};H.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Qa.inspect(e)}"`);return[].concat(t).every(n=>ke(n,r)(e))};H.capture=(e,t,r)=>{let n=xn.isWindows(r),s=ke.makeRe(String(e),{...r,capture:!0}).exec(n?xn.toPosixSlashes(t):t);if(s)return s.slice(1).map(o=>o===void 0?"":o)};H.makeRe=(...e)=>ke.makeRe(...e);H.scan=(...e)=>ke.scan(...e);H.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let i of Ga(String(n),t))r.push(ke.parse(i,t));return r};H.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!Va(e)?[e]:Ga(e,t)};H.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return H.braces(e,{...t,expand:!0})};H.hasBraces=Va;Wa.exports=H});var iu=d(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.isAbsolute=R.partitionAbsoluteAndRelative=R.removeDuplicateSlashes=R.matchAny=R.convertPatternsToRe=R.makeRe=R.getPatternParts=R.expandBraceExpansion=R.expandPatternsWithBraceExpansion=R.isAffectDepthOfReadingPattern=R.endsWithSlashGlobStar=R.hasGlobStar=R.getBaseDirectory=R.isPatternRelatedToParentDirectory=R.getPatternsOutsideCurrentDirectory=R.getPatternsInsideCurrentDirectory=R.getPositivePatterns=R.getNegativePatterns=R.isPositivePattern=R.isNegativePattern=R.convertToNegativePattern=R.convertToPositivePattern=R.isDynamicPattern=R.isStaticPattern=void 0;var Ka=require("path"),Fd=$o(),wn=Ya(),Ja="**",Nd="\\",Hd=/[*?]|^!/,$d=/\[[^[]*]/,Bd=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,jd=/[!*+?@]\([^(]*\)/,Ud=/,|\.\./,Qd=/(?!^)\/{2,}/g;function za(e,t={}){return!Xa(e,t)}R.isStaticPattern=za;function Xa(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(Nd)||Hd.test(e)||$d.test(e)||Bd.test(e)||t.extglob!==!1&&jd.test(e)||t.braceExpansion!==!1&&Gd(e))}R.isDynamicPattern=Xa;function Gd(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let n=e.slice(t,r);return Ud.test(n)}function Vd(e){return cr(e)?e.slice(1):e}R.convertToPositivePattern=Vd;function Wd(e){return"!"+e}R.convertToNegativePattern=Wd;function cr(e){return e.startsWith("!")&&e[1]!=="("}R.isNegativePattern=cr;function Za(e){return!cr(e)}R.isPositivePattern=Za;function Yd(e){return e.filter(cr)}R.getNegativePatterns=Yd;function Kd(e){return e.filter(Za)}R.getPositivePatterns=Kd;function Jd(e){return e.filter(t=>!Cn(t))}R.getPatternsInsideCurrentDirectory=Jd;function zd(e){return e.filter(Cn)}R.getPatternsOutsideCurrentDirectory=zd;function Cn(e){return e.startsWith("..")||e.startsWith("./..")}R.isPatternRelatedToParentDirectory=Cn;function Xd(e){return Fd(e,{flipBackslashes:!1})}R.getBaseDirectory=Xd;function Zd(e){return e.includes(Ja)}R.hasGlobStar=Zd;function eu(e){return e.endsWith("/"+Ja)}R.endsWithSlashGlobStar=eu;function em(e){let t=Ka.basename(e);return eu(e)||za(t)}R.isAffectDepthOfReadingPattern=em;function tm(e){return e.reduce((t,r)=>t.concat(tu(r)),[])}R.expandPatternsWithBraceExpansion=tm;function tu(e){let t=wn.braces(e,{expand:!0,nodupes:!0,keepEscaping:!0});return t.sort((r,n)=>r.length-n.length),t.filter(r=>r!=="")}R.expandBraceExpansion=tu;function rm(e,t){let{parts:r}=wn.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}R.getPatternParts=rm;function ru(e,t){return wn.makeRe(e,t)}R.makeRe=ru;function nm(e,t){return e.map(r=>ru(r,t))}R.convertPatternsToRe=nm;function im(e,t){return t.some(r=>r.test(e))}R.matchAny=im;function sm(e){return e.replace(Qd,"/")}R.removeDuplicateSlashes=sm;function om(e){let t=[],r=[];for(let n of e)nu(n)?t.push(n):r.push(n);return[t,r]}R.partitionAbsoluteAndRelative=om;function nu(e){return Ka.isAbsolute(e)}R.isAbsolute=nu});var uu=d((VA,au)=>{"use strict";var am=require("stream"),su=am.PassThrough,um=Array.prototype.slice;au.exports=lm;function lm(){let e=[],t=um.call(arguments),r=!1,n=t[t.length-1];n&&!Array.isArray(n)&&n.pipe==null?t.pop():n={};let i=n.end!==!1,s=n.pipeError===!0;n.objectMode==null&&(n.objectMode=!0),n.highWaterMark==null&&(n.highWaterMark=64*1024);let o=su(n);function a(){for(let l=0,f=arguments.length;l<f;l++)e.push(ou(arguments[l],n));return u(),this}function u(){if(r)return;r=!0;let l=e.shift();if(!l){process.nextTick(c);return}Array.isArray(l)||(l=[l]);let f=l.length+1;function h(){--f>0||(r=!1,u())}function m(p){function y(){p.removeListener("merge2UnpipeEnd",y),p.removeListener("end",y),s&&p.removeListener("error",x),h()}function x(C){o.emit("error",C)}if(p._readableState.endEmitted)return h();p.on("merge2UnpipeEnd",y),p.on("end",y),s&&p.on("error",x),p.pipe(o,{end:!1}),p.resume()}for(let p=0;p<l.length;p++)m(l[p]);h()}function c(){r=!1,o.emit("queueDrain"),i&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(l){l.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function ou(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=ou(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(su(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var cu=d(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.merge=void 0;var cm=uu();function fm(e){let t=cm(e);return e.forEach(r=>{r.once("error",n=>t.emit("error",n))}),t.once("close",()=>lu(e)),t.once("end",()=>lu(e)),t}fr.merge=fm;function lu(e){e.forEach(t=>t.emit("close"))}});var fu=d(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.isEmpty=ft.isString=void 0;function hm(e){return typeof e=="string"}ft.isString=hm;function pm(e){return e===""}ft.isEmpty=pm});var qe=d(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.string=ne.stream=ne.pattern=ne.path=ne.fs=ne.errno=ne.array=void 0;var dm=Oo();ne.array=dm;var mm=Ro();ne.errno=mm;var gm=To();ne.fs=gm;var _m=Lo();ne.path=_m;var ym=iu();ne.pattern=ym;var Sm=cu();ne.stream=Sm;var bm=fu();ne.string=bm});var mu=d(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.convertPatternGroupToTask=ie.convertPatternGroupsToTasks=ie.groupPatternsByBaseDirectory=ie.getNegativePatternsAsPositive=ie.getPositivePatterns=ie.convertPatternsToTasks=ie.generate=void 0;var Ce=qe();function vm(e,t){let r=hu(e,t),n=hu(t.ignore,t),i=pu(r),s=du(r,n),o=i.filter(l=>Ce.pattern.isStaticPattern(l,t)),a=i.filter(l=>Ce.pattern.isDynamicPattern(l,t)),u=On(o,s,!1),c=On(a,s,!0);return u.concat(c)}ie.generate=vm;function hu(e,t){let r=e;return t.braceExpansion&&(r=Ce.pattern.expandPatternsWithBraceExpansion(r)),t.baseNameMatch&&(r=r.map(n=>n.includes("/")?n:`**/${n}`)),r.map(n=>Ce.pattern.removeDuplicateSlashes(n))}function On(e,t,r){let n=[],i=Ce.pattern.getPatternsOutsideCurrentDirectory(e),s=Ce.pattern.getPatternsInsideCurrentDirectory(e),o=Rn(i),a=Rn(s);return n.push(...Tn(o,t,r)),"."in a?n.push(Pn(".",s,t,r)):n.push(...Tn(a,t,r)),n}ie.convertPatternsToTasks=On;function pu(e){return Ce.pattern.getPositivePatterns(e)}ie.getPositivePatterns=pu;function du(e,t){return Ce.pattern.getNegativePatterns(e).concat(t).map(Ce.pattern.convertToPositivePattern)}ie.getNegativePatternsAsPositive=du;function Rn(e){let t={};return e.reduce((r,n)=>{let i=Ce.pattern.getBaseDirectory(n);return i in r?r[i].push(n):r[i]=[n],r},t)}ie.groupPatternsByBaseDirectory=Rn;function Tn(e,t,r){return Object.keys(e).map(n=>Pn(n,e[n],t,r))}ie.convertPatternGroupsToTasks=Tn;function Pn(e,t,r,n){return{dynamic:n,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(Ce.pattern.convertToNegativePattern))}}ie.convertPatternGroupToTask=Pn});var _u=d(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.read=void 0;function Am(e,t,r){t.fs.lstat(e,(n,i)=>{if(n!==null){gu(r,n);return}if(!i.isSymbolicLink()||!t.followSymbolicLink){kn(r,i);return}t.fs.stat(e,(s,o)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){gu(r,s);return}kn(r,i);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),kn(r,o)})})}hr.read=Am;function gu(e,t){e(t)}function kn(e,t){e(null,t)}});var yu=d(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.read=void 0;function Em(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(n){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw n}}pr.read=Em});var Su=d(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.createFileSystemAdapter=je.FILE_SYSTEM_ADAPTER=void 0;var dr=require("fs");je.FILE_SYSTEM_ADAPTER={lstat:dr.lstat,stat:dr.stat,lstatSync:dr.lstatSync,statSync:dr.statSync};function xm(e){return e===void 0?je.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},je.FILE_SYSTEM_ADAPTER),e)}je.createFileSystemAdapter=xm});var bu=d(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var wm=Su(),In=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=wm.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};Ln.default=In});var nt=d(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.statSync=Ue.stat=Ue.Settings=void 0;var vu=_u(),Cm=yu(),Mn=bu();Ue.Settings=Mn.default;function Om(e,t,r){if(typeof t=="function"){vu.read(e,Dn(),t);return}vu.read(e,Dn(t),r)}Ue.stat=Om;function Rm(e,t){let r=Dn(t);return Cm.read(e,r)}Ue.statSync=Rm;function Dn(e={}){return e instanceof Mn.default?e:new Mn.default(e)}});var xu=d((rE,Eu)=>{"use strict";var Au;Eu.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(Au||(Au=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var Cu=d((nE,wu)=>{"use strict";wu.exports=Pm;var Tm=xu();function Pm(e,t){let r,n,i,s=!0;Array.isArray(e)?(r=[],n=e.length):(i=Object.keys(e),r={},n=i.length);function o(u){function c(){t&&t(u,r),t=null}s?Tm(c):c()}function a(u,c,l){r[u]=l,(--n===0||c)&&o(c)}n?i?i.forEach(function(u){e[u](function(c,l){a(u,c,l)})}):e.forEach(function(u,c){u(function(l,f){a(c,l,f)})}):o(null),s=!1}});var qn=d(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var mr=process.versions.node.split(".");if(mr[0]===void 0||mr[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var Ou=Number.parseInt(mr[0],10),km=Number.parseInt(mr[1],10),Ru=10,Im=10,Lm=Ou>Ru,Mm=Ou===Ru&&km>=Im;gr.IS_SUPPORT_READDIR_WITH_FILE_TYPES=Lm||Mm});var Tu=d(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.createDirentFromStats=void 0;var Fn=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function Dm(e,t){return new Fn(e,t)}_r.createDirentFromStats=Dm});var Nn=d(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.fs=void 0;var qm=Tu();yr.fs=qm});var Hn=d(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.joinPathSegments=void 0;function Fm(e,t,r){return e.endsWith(r)?e+t:e+r+t}Sr.joinPathSegments=Fm});var Du=d(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.readdir=Qe.readdirWithFileTypes=Qe.read=void 0;var Nm=nt(),Pu=Cu(),Hm=qn(),ku=Nn(),Iu=Hn();function $m(e,t,r){if(!t.stats&&Hm.IS_SUPPORT_READDIR_WITH_FILE_TYPES){Lu(e,t,r);return}Mu(e,t,r)}Qe.read=$m;function Lu(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(n,i)=>{if(n!==null){br(r,n);return}let s=i.map(a=>({dirent:a,name:a.name,path:Iu.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){$n(r,s);return}let o=s.map(a=>Bm(a,t));Pu(o,(a,u)=>{if(a!==null){br(r,a);return}$n(r,u)})})}Qe.readdirWithFileTypes=Lu;function Bm(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(n,i)=>{if(n!==null){if(t.throwErrorOnBrokenSymbolicLink){r(n);return}r(null,e);return}e.dirent=ku.fs.createDirentFromStats(e.name,i),r(null,e)})}}function Mu(e,t,r){t.fs.readdir(e,(n,i)=>{if(n!==null){br(r,n);return}let s=i.map(o=>{let a=Iu.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{Nm.stat(a,t.fsStatSettings,(c,l)=>{if(c!==null){u(c);return}let f={name:o,path:a,dirent:ku.fs.createDirentFromStats(o,l)};t.stats&&(f.stats=l),u(null,f)})}});Pu(s,(o,a)=>{if(o!==null){br(r,o);return}$n(r,a)})})}Qe.readdir=Mu;function br(e,t){e(t)}function $n(e,t){e(null,t)}});var $u=d(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.readdir=Ge.readdirWithFileTypes=Ge.read=void 0;var jm=nt(),Um=qn(),qu=Nn(),Fu=Hn();function Qm(e,t){return!t.stats&&Um.IS_SUPPORT_READDIR_WITH_FILE_TYPES?Nu(e,t):Hu(e,t)}Ge.read=Qm;function Nu(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{let i={dirent:n,name:n.name,path:Fu.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let s=t.fs.statSync(i.path);i.dirent=qu.fs.createDirentFromStats(i.name,s)}catch(s){if(t.throwErrorOnBrokenSymbolicLink)throw s}return i})}Ge.readdirWithFileTypes=Nu;function Hu(e,t){return t.fs.readdirSync(e).map(n=>{let i=Fu.joinPathSegments(e,n,t.pathSegmentSeparator),s=jm.statSync(i,t.fsStatSettings),o={name:n,path:i,dirent:qu.fs.createDirentFromStats(n,s)};return t.stats&&(o.stats=s),o})}Ge.readdir=Hu});var Bu=d(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createFileSystemAdapter=Ve.FILE_SYSTEM_ADAPTER=void 0;var ht=require("fs");Ve.FILE_SYSTEM_ADAPTER={lstat:ht.lstat,stat:ht.stat,lstatSync:ht.lstatSync,statSync:ht.statSync,readdir:ht.readdir,readdirSync:ht.readdirSync};function Gm(e){return e===void 0?Ve.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},Ve.FILE_SYSTEM_ADAPTER),e)}Ve.createFileSystemAdapter=Gm});var ju=d(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var Vm=require("path"),Wm=nt(),Ym=Bu(),Bn=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=Ym.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,Vm.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new Wm.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};jn.default=Bn});var vr=d(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.Settings=We.scandirSync=We.scandir=void 0;var Uu=Du(),Km=$u(),Un=ju();We.Settings=Un.default;function Jm(e,t,r){if(typeof t=="function"){Uu.read(e,Qn(),t);return}Uu.read(e,Qn(t),r)}We.scandir=Jm;function zm(e,t){let r=Qn(t);return Km.read(e,r)}We.scandirSync=zm;function Qn(e={}){return e instanceof Un.default?e:new Un.default(e)}});var Gu=d((pE,Qu)=>{"use strict";function Xm(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}Qu.exports=Xm});var Wu=d((dE,Gn)=>{"use strict";var Zm=Gu();function Vu(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=Zm(eg),i=null,s=null,o=0,a=null,u={push:y,drain:fe,saturated:fe,pause:l,paused:!1,get concurrency(){return r},set concurrency(w){if(!(w>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=w,!u.paused)for(;i&&o<r;)o++,C()},running:c,resume:m,idle:p,length:f,getQueue:h,unshift:x,empty:fe,kill:v,killAndDrain:L,error:$,abort:re};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var w=i,I=0;w;)w=w.next,I++;return I}function h(){for(var w=i,I=[];w;)I.push(w.value),w=w.next;return I}function m(){if(u.paused){if(u.paused=!1,i===null){o++,C();return}for(;i&&o<r;)o++,C()}}function p(){return o===0&&u.length()===0}function y(w,I){var A=n.get();A.context=e,A.release=C,A.value=w,A.callback=I||fe,A.errorHandler=a,o>=r||u.paused?s?(s.next=A,s=A):(i=A,s=A,u.saturated()):(o++,t.call(e,A.value,A.worked))}function x(w,I){var A=n.get();A.context=e,A.release=C,A.value=w,A.callback=I||fe,A.errorHandler=a,o>=r||u.paused?i?(A.next=i,i=A):(i=A,s=A,u.saturated()):(o++,t.call(e,A.value,A.worked))}function C(w){w&&n.release(w);var I=i;I&&o<=r?u.paused?o--:(s===i&&(s=null),i=I.next,I.next=null,t.call(e,I.value,I.worked),s===null&&u.empty()):--o===0&&u.drain()}function v(){i=null,s=null,u.drain=fe}function L(){i=null,s=null,u.drain(),u.drain=fe}function re(){var w=i;for(i=null,s=null;w;){var I=w.next,A=w.callback,M=w.errorHandler,J=w.value,S=w.context;w.value=null,w.callback=fe,w.errorHandler=null,M&&M(new Error("abort"),J),A.call(S,new Error("abort")),w.release(w),w=I}u.drain=fe}function $(w){a=w}}function fe(){}function eg(){this.value=null,this.callback=fe,this.next=null,this.release=fe,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=fe,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function tg(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,f){t.call(this,l).then(function(h){f(null,h)},f)}var i=Vu(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=c,i;function a(l){var f=new Promise(function(h,m){s(l,function(p,y){if(p){m(p);return}h(y)})});return f.catch(fe),f}function u(l){var f=new Promise(function(h,m){o(l,function(p,y){if(p){m(p);return}h(y)})});return f.catch(fe),f}function c(){var l=new Promise(function(f){process.nextTick(function(){if(i.idle())f();else{var h=i.drain;i.drain=function(){typeof h=="function"&&h(),f(),i.drain=h}}})});return l}}Gn.exports=Vu;Gn.exports.promise=tg});var Ar=d(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.joinPathSegments=Ie.replacePathSegmentSeparator=Ie.isAppliedFilter=Ie.isFatalError=void 0;function rg(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}Ie.isFatalError=rg;function ng(e,t){return e===null||e(t)}Ie.isAppliedFilter=ng;function ig(e,t){return e.split(/[/\\]/).join(t)}Ie.replacePathSegmentSeparator=ig;function sg(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}Ie.joinPathSegments=sg});var Yn=d(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var og=Ar(),Vn=class{constructor(t,r){this._root=t,this._settings=r,this._root=og.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};Wn.default=Vn});var zn=d(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});var ag=require("events"),ug=vr(),lg=Wu(),Er=Ar(),cg=Yn(),Kn=class extends cg.default{constructor(t,r){super(t,r),this._settings=r,this._scandir=ug.scandir,this._emitter=new ag.EventEmitter,this._queue=lg(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let n={directory:t,base:r};this._queue.push(n,i=>{i!==null&&this._handleError(i)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(n,i)=>{if(n!==null){r(n,void 0);return}for(let s of i)this._handleEntry(s,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!Er.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let n=t.path;r!==void 0&&(t.path=Er.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Er.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&Er.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};Jn.default=Kn});var Yu=d(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var fg=zn(),Xn=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new fg.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{hg(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{pg(t,this._storage)}),this._reader.read()}};Zn.default=Xn;function hg(e,t){e(t)}function pg(e,t){e(null,t)}});var Ku=d(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var dg=require("stream"),mg=zn(),ei=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new mg.default(this._root,this._settings),this._stream=new dg.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};ti.default=ei});var Ju=d(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var gg=vr(),xr=Ar(),_g=Yn(),ri=class extends _g.default{constructor(){super(...arguments),this._scandir=gg.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let n=this._scandir(t,this._settings.fsScandirSettings);for(let i of n)this._handleEntry(i,r)}catch(n){this._handleError(n)}}_handleError(t){if(xr.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let n=t.path;r!==void 0&&(t.path=xr.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),xr.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&xr.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(n,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};ni.default=ri});var zu=d(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var yg=Ju(),ii=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new yg.default(this._root,this._settings)}read(){return this._reader.read()}};si.default=ii});var Xu=d(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var Sg=require("path"),bg=vr(),oi=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,Sg.sep),this.fsScandirSettings=new bg.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};ai.default=oi});var Cr=d(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.Settings=Le.walkStream=Le.walkSync=Le.walk=void 0;var Zu=Yu(),vg=Ku(),Ag=zu(),ui=Xu();Le.Settings=ui.default;function Eg(e,t,r){if(typeof t=="function"){new Zu.default(e,wr()).read(t);return}new Zu.default(e,wr(t)).read(r)}Le.walk=Eg;function xg(e,t){let r=wr(t);return new Ag.default(e,r).read()}Le.walkSync=xg;function wg(e,t){let r=wr(t);return new vg.default(e,r).read()}Le.walkStream=wg;function wr(e={}){return e instanceof ui.default?e:new ui.default(e)}});var Or=d(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});var Cg=require("path"),Og=nt(),el=qe(),li=class{constructor(t){this._settings=t,this._fsStatSettings=new Og.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return Cg.resolve(this._settings.cwd,t)}_makeEntry(t,r){let n={name:r,path:r,dirent:el.fs.createDirentFromStats(r,t)};return this._settings.stats&&(n.stats=t),n}_isFatalError(t){return!el.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};ci.default=li});var pi=d(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var Rg=require("stream"),Tg=nt(),Pg=Cr(),kg=Or(),fi=class extends kg.default{constructor(){super(...arguments),this._walkStream=Pg.walkStream,this._stat=Tg.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let n=t.map(this._getFullEntryPath,this),i=new Rg.PassThrough({objectMode:!0});i._write=(s,o,a)=>this._getEntry(n[s],t[s],r).then(u=>{u!==null&&r.entryFilter(u)&&i.push(u),s===n.length-1&&i.end(),a()}).catch(a);for(let s=0;s<n.length;s++)i.write(s);return i}_getEntry(t,r,n){return this._getStat(t).then(i=>this._makeEntry(i,r)).catch(i=>{if(n.errorFilter(i))return null;throw i})}_getStat(t){return new Promise((r,n)=>{this._stat(t,this._fsStatSettings,(i,s)=>i===null?r(s):n(i))})}};hi.default=fi});var tl=d(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});var Ig=Cr(),Lg=Or(),Mg=pi(),di=class extends Lg.default{constructor(){super(...arguments),this._walkAsync=Ig.walk,this._readerStream=new Mg.default(this._settings)}dynamic(t,r){return new Promise((n,i)=>{this._walkAsync(t,r,(s,o)=>{s===null?n(o):i(s)})})}async static(t,r){let n=[],i=this._readerStream.static(t,r);return new Promise((s,o)=>{i.once("error",o),i.on("data",a=>n.push(a)),i.once("end",()=>s(n))})}};mi.default=di});var rl=d(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});var Mt=qe(),gi=class{constructor(t,r,n){this._patterns=t,this._settings=r,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(let t of this._patterns){let r=this._getPatternSegments(t),n=this._splitSegmentsIntoSections(r);this._storage.push({complete:n.length<=1,pattern:t,segments:r,sections:n})}}_getPatternSegments(t){return Mt.pattern.getPatternParts(t,this._micromatchOptions).map(n=>Mt.pattern.isDynamicPattern(n,this._settings)?{dynamic:!0,pattern:n,patternRe:Mt.pattern.makeRe(n,this._micromatchOptions)}:{dynamic:!1,pattern:n})}_splitSegmentsIntoSections(t){return Mt.array.splitWhen(t,r=>r.dynamic&&Mt.pattern.hasGlobStar(r.pattern))}};_i.default=gi});var nl=d(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var Dg=rl(),yi=class extends Dg.default{match(t){let r=t.split("/"),n=r.length,i=this._storage.filter(s=>!s.complete||s.segments.length>n);for(let s of i){let o=s.sections[0];if(!s.complete&&n>o.length||r.every((u,c)=>{let l=s.segments[c];return!!(l.dynamic&&l.patternRe.test(u)||!l.dynamic&&l.pattern===u)}))return!0}return!1}};Si.default=yi});var il=d(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});var Rr=qe(),qg=nl(),bi=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,n){let i=this._getMatcher(r),s=this._getNegativePatternsRe(n);return o=>this._filter(t,o,i,s)}_getMatcher(t){return new qg.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(Rr.pattern.isAffectDepthOfReadingPattern);return Rr.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,n,i){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let s=Rr.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(s,n)?!1:this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let n=r.split("/").length;if(t==="")return n;let i=t.split("/").length;return n-i}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!Rr.pattern.matchAny(t,r)}};vi.default=bi});var sl=d(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});var Ye=qe(),Ai=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let[n,i]=Ye.pattern.partitionAbsoluteAndRelative(r),s={positive:{all:Ye.pattern.convertPatternsToRe(t,this._micromatchOptions)},negative:{absolute:Ye.pattern.convertPatternsToRe(n,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0})),relative:Ye.pattern.convertPatternsToRe(i,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}))}};return o=>this._filter(o,s)}_filter(t,r){let n=Ye.path.removeLeadingDotSegment(t.path);if(this._settings.unique&&this._isDuplicateEntry(n)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t))return!1;let i=this._isMatchToPatternsSet(n,r,t.dirent.isDirectory());return this._settings.unique&&i&&this._createIndexRecord(n),i}_isDuplicateEntry(t){return this.index.has(t)}_createIndexRecord(t){this.index.set(t,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isMatchToPatternsSet(t,r,n){return!(!this._isMatchToPatterns(t,r.positive.all,n)||this._isMatchToPatterns(t,r.negative.relative,n)||this._isMatchToAbsoluteNegative(t,r.negative.absolute,n))}_isMatchToAbsoluteNegative(t,r,n){if(r.length===0)return!1;let i=Ye.path.makeAbsolute(this._settings.cwd,t);return this._isMatchToPatterns(i,r,n)}_isMatchToPatterns(t,r,n){if(r.length===0)return!1;let i=Ye.pattern.matchAny(t,r);return!i&&n?Ye.pattern.matchAny(t+"/",r):i}};Ei.default=Ai});var ol=d(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var Fg=qe(),xi=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return Fg.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};wi.default=xi});var ul=d(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var al=qe(),Ci=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=al.path.makeAbsolute(this._settings.cwd,r),r=al.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};Oi.default=Ci});var Tr=d(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Ng=require("path"),Hg=il(),$g=sl(),Bg=ol(),jg=ul(),Ri=class{constructor(t){this._settings=t,this.errorFilter=new Bg.default(this._settings),this.entryFilter=new $g.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new Hg.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new jg.default(this._settings)}_getRootDirectory(t){return Ng.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Ti.default=Ri});var ll=d(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var Ug=tl(),Qg=Tr(),Pi=class extends Qg.default{constructor(){super(...arguments),this._reader=new Ug.default(this._settings)}async read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return(await this.api(r,t,n)).map(s=>n.transform(s))}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};ki.default=Pi});var cl=d(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Gg=require("stream"),Vg=pi(),Wg=Tr(),Ii=class extends Wg.default{constructor(){super(...arguments),this._reader=new Vg.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t),i=this.api(r,t,n),s=new Gg.Readable({objectMode:!0,read:()=>{}});return i.once("error",o=>s.emit("error",o)).on("data",o=>s.emit("data",n.transform(o))).once("end",()=>s.emit("end")),s.once("close",()=>i.destroy()),s}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Li.default=Ii});var fl=d(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var Yg=nt(),Kg=Cr(),Jg=Or(),Mi=class extends Jg.default{constructor(){super(...arguments),this._walkSync=Kg.walkSync,this._statSync=Yg.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let n=[];for(let i of t){let s=this._getFullEntryPath(i),o=this._getEntry(s,i,r);o===null||!r.entryFilter(o)||n.push(o)}return n}_getEntry(t,r,n){try{let i=this._getStat(t);return this._makeEntry(i,r)}catch(i){if(n.errorFilter(i))return null;throw i}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};Di.default=Mi});var hl=d(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var zg=fl(),Xg=Tr(),qi=class extends Xg.default{constructor(){super(...arguments),this._reader=new zg.default(this._settings)}read(t){let r=this._getRootDirectory(t),n=this._getReaderOptions(t);return this.api(r,t,n).map(n.transform)}api(t,r,n){return r.dynamic?this._reader.dynamic(t,n):this._reader.static(r.patterns,n)}};Fi.default=qi});var pl=d(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var pt=require("fs"),Zg=require("os"),e_=Math.max(Zg.cpus().length,1);dt.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:pt.lstat,lstatSync:pt.lstatSync,stat:pt.stat,statSync:pt.statSync,readdir:pt.readdir,readdirSync:pt.readdirSync};var Ni=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,e_),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},dt.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};dt.default=Ni});var gl=d((HE,ml)=>{"use strict";var dl=mu(),t_=ll(),r_=cl(),n_=hl(),Hi=pl(),Ae=qe();async function $i(e,t){Oe(e);let r=Bi(e,t_.default,t),n=await Promise.all(r);return Ae.array.flatten(n)}(function(e){e.glob=e,e.globSync=t,e.globStream=r,e.async=e;function t(c,l){Oe(c);let f=Bi(c,n_.default,l);return Ae.array.flatten(f)}e.sync=t;function r(c,l){Oe(c);let f=Bi(c,r_.default,l);return Ae.stream.merge(f)}e.stream=r;function n(c,l){Oe(c);let f=[].concat(c),h=new Hi.default(l);return dl.generate(f,h)}e.generateTasks=n;function i(c,l){Oe(c);let f=new Hi.default(l);return Ae.pattern.isDynamicPattern(c,f)}e.isDynamicPattern=i;function s(c){return Oe(c),Ae.path.escape(c)}e.escapePath=s;function o(c){return Oe(c),Ae.path.convertPathToPattern(c)}e.convertPathToPattern=o;let a;(function(c){function l(h){return Oe(h),Ae.path.escapePosixPath(h)}c.escapePath=l;function f(h){return Oe(h),Ae.path.convertPosixPathToPattern(h)}c.convertPathToPattern=f})(a=e.posix||(e.posix={}));let u;(function(c){function l(h){return Oe(h),Ae.path.escapeWindowsPath(h)}c.escapePath=l;function f(h){return Oe(h),Ae.path.convertWindowsPathToPattern(h)}c.convertPathToPattern=f})(u=e.win32||(e.win32={}))})($i||($i={}));function Bi(e,t,r){let n=[].concat(e),i=new Hi.default(r),s=dl.generate(n,i),o=new t(i);return s.map(o.read,o)}function Oe(e){if(![].concat(e).every(n=>Ae.string.isString(n)&&!Ae.string.isEmpty(n)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}ml.exports=$i});var Dt=d(Ui=>{"use strict";var Pr=class extends Error{constructor(t,r,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=r,this.exitCode=t,this.nestedError=void 0}},ji=class extends Pr{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Ui.CommanderError=Pr;Ui.InvalidArgumentError=ji});var kr=d(Gi=>{"use strict";var{InvalidArgumentError:i_}=Dt(),Qi=class{constructor(t,r){switch(this.description=r||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t;break}this._name.endsWith("...")&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_collectValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:(r.push(t),r)}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new i_(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(r,n):r},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function s_(e){let t=e.name()+(e.variadic===!0?"...":"");return e.required?"<"+t+">":"["+t+"]"}Gi.Argument=Qi;Gi.humanReadableArgName=s_});var Yi=d(Wi=>{"use strict";var{humanReadableArgName:o_}=kr(),Vi=class{constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(t){this.helpWidth=this.helpWidth??t.helpWidth??80}visibleCommands(t){let r=t.commands.filter(i=>!i._hidden),n=t._getHelpCommand();return n&&!n._hidden&&r.push(n),this.sortSubcommands&&r.sort((i,s)=>i.name().localeCompare(s.name())),r}compareOptions(t,r){let n=i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,"");return n(t).localeCompare(n(r))}visibleOptions(t){let r=t.options.filter(i=>!i.hidden),n=t._getHelpOption();if(n&&!n.hidden){let i=n.short&&t._findOption(n.short),s=n.long&&t._findOption(n.long);!i&&!s?r.push(n):n.long&&!s?r.push(t.createOption(n.long,n.description)):n.short&&!i&&r.push(t.createOption(n.short,n.description))}return this.sortOptions&&r.sort(this.compareOptions),r}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];let r=[];for(let n=t.parent;n;n=n.parent){let i=n.options.filter(s=>!s.hidden);r.push(...i)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleArguments(t){return t._argsDescription&&t.registeredArguments.forEach(r=>{r.description=r.description||t._argsDescription[r.name()]||""}),t.registeredArguments.find(r=>r.description)?t.registeredArguments:[]}subcommandTerm(t){let r=t.registeredArguments.map(n=>o_(n)).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(r?" "+r:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,r){return r.visibleCommands(t).reduce((n,i)=>Math.max(n,this.displayWidth(r.styleSubcommandTerm(r.subcommandTerm(i)))),0)}longestOptionTermLength(t,r){return r.visibleOptions(t).reduce((n,i)=>Math.max(n,this.displayWidth(r.styleOptionTerm(r.optionTerm(i)))),0)}longestGlobalOptionTermLength(t,r){return r.visibleGlobalOptions(t).reduce((n,i)=>Math.max(n,this.displayWidth(r.styleOptionTerm(r.optionTerm(i)))),0)}longestArgumentTermLength(t,r){return r.visibleArguments(t).reduce((n,i)=>Math.max(n,this.displayWidth(r.styleArgumentTerm(r.argumentTerm(i)))),0)}commandUsage(t){let r=t._name;t._aliases[0]&&(r=r+"|"+t._aliases[0]);let n="";for(let i=t.parent;i;i=i.parent)n=i.name()+" "+n;return n+r+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){let r=[];if(t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&(t.required||t.optional||t.isBoolean()&&typeof t.defaultValue=="boolean")&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),t.presetArg!==void 0&&t.optional&&r.push(`preset: ${JSON.stringify(t.presetArg)}`),t.envVar!==void 0&&r.push(`env: ${t.envVar}`),r.length>0){let n=`(${r.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}argumentDescription(t){let r=[];if(t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),r.length>0){let n=`(${r.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}formatItemList(t,r,n){return r.length===0?[]:[n.styleTitle(t),...r,""]}groupItems(t,r,n){let i=new Map;return t.forEach(s=>{let o=n(s);i.has(o)||i.set(o,[])}),r.forEach(s=>{let o=n(s);i.has(o)||i.set(o,[]),i.get(o).push(s)}),i}formatHelp(t,r){let n=r.padWidth(t,r),i=r.helpWidth??80;function s(f,h){return r.formatItem(f,n,h,r)}let o=[`${r.styleTitle("Usage:")} ${r.styleUsage(r.commandUsage(t))}`,""],a=r.commandDescription(t);a.length>0&&(o=o.concat([r.boxWrap(r.styleCommandDescription(a),i),""]));let u=r.visibleArguments(t).map(f=>s(r.styleArgumentTerm(r.argumentTerm(f)),r.styleArgumentDescription(r.argumentDescription(f))));if(o=o.concat(this.formatItemList("Arguments:",u,r)),this.groupItems(t.options,r.visibleOptions(t),f=>f.helpGroupHeading??"Options:").forEach((f,h)=>{let m=f.map(p=>s(r.styleOptionTerm(r.optionTerm(p)),r.styleOptionDescription(r.optionDescription(p))));o=o.concat(this.formatItemList(h,m,r))}),r.showGlobalOptions){let f=r.visibleGlobalOptions(t).map(h=>s(r.styleOptionTerm(r.optionTerm(h)),r.styleOptionDescription(r.optionDescription(h))));o=o.concat(this.formatItemList("Global Options:",f,r))}return this.groupItems(t.commands,r.visibleCommands(t),f=>f.helpGroup()||"Commands:").forEach((f,h)=>{let m=f.map(p=>s(r.styleSubcommandTerm(r.subcommandTerm(p)),r.styleSubcommandDescription(r.subcommandDescription(p))));o=o.concat(this.formatItemList(h,m,r))}),o.join(`
`)}displayWidth(t){return _l(t).length}styleTitle(t){return t}styleUsage(t){return t.split(" ").map(r=>r==="[options]"?this.styleOptionText(r):r==="[command]"?this.styleSubcommandText(r):r[0]==="["||r[0]==="<"?this.styleArgumentText(r):this.styleCommandText(r)).join(" ")}styleCommandDescription(t){return this.styleDescriptionText(t)}styleOptionDescription(t){return this.styleDescriptionText(t)}styleSubcommandDescription(t){return this.styleDescriptionText(t)}styleArgumentDescription(t){return this.styleDescriptionText(t)}styleDescriptionText(t){return t}styleOptionTerm(t){return this.styleOptionText(t)}styleSubcommandTerm(t){return t.split(" ").map(r=>r==="[options]"?this.styleOptionText(r):r[0]==="["||r[0]==="<"?this.styleArgumentText(r):this.styleSubcommandText(r)).join(" ")}styleArgumentTerm(t){return this.styleArgumentText(t)}styleOptionText(t){return t}styleArgumentText(t){return t}styleSubcommandText(t){return t}styleCommandText(t){return t}padWidth(t,r){return Math.max(r.longestOptionTermLength(t,r),r.longestGlobalOptionTermLength(t,r),r.longestSubcommandTermLength(t,r),r.longestArgumentTermLength(t,r))}preformatted(t){return/\n[^\S\r\n]/.test(t)}formatItem(t,r,n,i){let o=" ".repeat(2);if(!n)return o+t;let a=t.padEnd(r+t.length-i.displayWidth(t)),u=2,l=(this.helpWidth??80)-r-u-2,f;return l<this.minWidthToWrap||i.preformatted(n)?f=n:f=i.boxWrap(n,l).replace(/\n/g,`
`+" ".repeat(r+u)),o+a+" ".repeat(u)+f.replace(/\n/g,`
${o}`)}boxWrap(t,r){if(r<this.minWidthToWrap)return t;let n=t.split(/\r\n|\n/),i=/[\s]*[^\s]+/g,s=[];return n.forEach(o=>{let a=o.match(i);if(a===null){s.push("");return}let u=[a.shift()],c=this.displayWidth(u[0]);a.forEach(l=>{let f=this.displayWidth(l);if(c+f<=r){u.push(l),c+=f;return}s.push(u.join(""));let h=l.trimStart();u=[h],c=this.displayWidth(h)}),s.push(u.join(""))}),s.join(`
`)}};function _l(e){let t=/\x1b\[\d*(;\d*)*m/g;return e.replace(t,"")}Wi.Help=Vi;Wi.stripColor=_l});var Xi=d(zi=>{"use strict";var{InvalidArgumentError:a_}=Dt(),Ki=class{constructor(t,r){this.flags=t,this.description=r||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;let n=u_(t);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let r=t;return typeof t=="string"&&(r={[t]:!0}),this.implied=Object.assign(this.implied||{},r),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_collectValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:(r.push(t),r)}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new a_(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(r,n):r},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?yl(this.name().replace(/^no-/,"")):yl(this.name())}helpGroup(t){return this.helpGroupHeading=t,this}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Ji=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach(r=>{r.negate?this.negativeOptions.set(r.attributeName(),r):this.positiveOptions.set(r.attributeName(),r)}),this.negativeOptions.forEach((r,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(t,r){let n=r.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,s=i!==void 0?i:!1;return r.negate===(s===t)}};function yl(e){return e.split("-").reduce((t,r)=>t+r[0].toUpperCase()+r.slice(1))}function u_(e){let t,r,n=/^-[^-]$/,i=/^--[^-]/,s=e.split(/[ |,]+/).concat("guard");if(n.test(s[0])&&(t=s.shift()),i.test(s[0])&&(r=s.shift()),!t&&n.test(s[0])&&(t=s.shift()),!t&&i.test(s[0])&&(t=r,r=s.shift()),s[0].startsWith("-")){let o=s[0],a=`option creation failed due to '${o}' in option flags '${e}'`;throw/^-[^-][^-]/.test(o)?new Error(`${a}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):n.test(o)?new Error(`${a}
- too many short flags`):i.test(o)?new Error(`${a}
- too many long flags`):new Error(`${a}
- unrecognised flag format`)}if(t===void 0&&r===void 0)throw new Error(`option creation failed due to no flags found in '${e}'.`);return{shortFlag:t,longFlag:r}}zi.Option=Ki;zi.DualOptions=Ji});var bl=d(Sl=>{"use strict";function l_(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);let r=[];for(let n=0;n<=e.length;n++)r[n]=[n];for(let n=0;n<=t.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let i=1;i<=e.length;i++){let s=1;e[i-1]===t[n-1]?s=0:s=1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+s),i>1&&n>1&&e[i-1]===t[n-2]&&e[i-2]===t[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[e.length][t.length]}function c_(e,t){if(!t||t.length===0)return"";t=Array.from(new Set(t));let r=e.startsWith("--");r&&(e=e.slice(2),t=t.map(o=>o.slice(2)));let n=[],i=3,s=.4;return t.forEach(o=>{if(o.length<=1)return;let a=l_(e,o),u=Math.max(e.length,o.length);(u-a)/u>s&&(a<i?(i=a,n=[o]):a===i&&n.push(o))}),n.sort((o,a)=>o.localeCompare(a)),r&&(n=n.map(o=>`--${o}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}Sl.suggestSimilar=c_});var xl=d(ns=>{"use strict";var f_=require("events").EventEmitter,Zi=require("child_process"),Fe=require("path"),Ir=require("fs"),q=require("process"),{Argument:h_,humanReadableArgName:p_}=kr(),{CommanderError:es}=Dt(),{Help:d_,stripColor:m_}=Yi(),{Option:vl,DualOptions:g_}=Xi(),{suggestSimilar:Al}=bl(),ts=class e extends f_{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:r=>q.stdout.write(r),writeErr:r=>q.stderr.write(r),outputError:(r,n)=>n(r),getOutHelpWidth:()=>q.stdout.isTTY?q.stdout.columns:void 0,getErrHelpWidth:()=>q.stderr.isTTY?q.stderr.columns:void 0,getOutHasColors:()=>rs()??(q.stdout.isTTY&&q.stdout.hasColors?.()),getErrHasColors:()=>rs()??(q.stderr.isTTY&&q.stderr.hasColors?.()),stripColor:r=>m_(r)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._helpOption=t._helpOption,this._helpCommand=t._helpCommand,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}_getCommandAndAncestors(){let t=[];for(let r=this;r;r=r.parent)t.push(r);return t}command(t,r,n){let i=r,s=n;typeof i=="object"&&i!==null&&(s=i,i=null),s=s||{};let[,o,a]=t.match(/([^ ]+) *(.*)/),u=this.createCommand(o);return i&&(u.description(i),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,a&&u.arguments(a),this._registerCommand(u),u.parent=this,u.copyInheritedSettings(this),i?this:u}createCommand(t){return new e(t)}createHelp(){return Object.assign(new d_,this.configureHelp())}configureHelp(t){return t===void 0?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return t===void 0?this._outputConfiguration:(this._outputConfiguration={...this._outputConfiguration,...t},this)}showHelpAfterError(t=!0){return typeof t!="string"&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,r){if(!t._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return r=r||{},r.isDefault&&(this._defaultCommandName=t._name),(r.noHelp||r.hidden)&&(t._hidden=!0),this._registerCommand(t),t.parent=this,t._checkForBrokenPassThrough(),this}createArgument(t,r){return new h_(t,r)}argument(t,r,n,i){let s=this.createArgument(t,r);return typeof n=="function"?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(t){return t.trim().split(/ +/).forEach(r=>{this.argument(r)}),this}addArgument(t){let r=this.registeredArguments.slice(-1)[0];if(r?.variadic)throw new Error(`only the last argument can be variadic '${r.name()}'`);if(t.required&&t.defaultValue!==void 0&&t.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this.registeredArguments.push(t),this}helpCommand(t,r){if(typeof t=="boolean")return this._addImplicitHelpCommand=t,t&&this._defaultCommandGroup&&this._initCommandGroup(this._getHelpCommand()),this;let n=t??"help [command]",[,i,s]=n.match(/([^ ]+) *(.*)/),o=r??"display help for command",a=this.createCommand(i);return a.helpOption(!1),s&&a.arguments(s),o&&a.description(o),this._addImplicitHelpCommand=!0,this._helpCommand=a,(t||r)&&this._initCommandGroup(a),this}addHelpCommand(t,r){return typeof t!="object"?(this.helpCommand(t,r),this):(this._addImplicitHelpCommand=!0,this._helpCommand=t,this._initCommandGroup(t),this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(t,r){let n=["preSubcommand","preAction","postAction"];if(!n.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(r):this._lifeCycleHooks[t]=[r],this}exitOverride(t){return t?this._exitCallback=t:this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync")throw r},this}_exit(t,r,n){this._exitCallback&&this._exitCallback(new es(t,r,n)),q.exit(t)}action(t){let r=n=>{let i=this.registeredArguments.length,s=n.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),t.apply(this,s)};return this._actionHandler=r,this}createOption(t,r){return new vl(t,r)}_callParseArg(t,r,n,i){try{return t.parseArg(r,n)}catch(s){if(s.code==="commander.invalidArgument"){let o=`${i} ${s.message}`;this.error(o,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(t){let r=t.short&&this._findOption(t.short)||t.long&&this._findOption(t.long);if(r){let n=t.long&&this._findOption(t.long)?t.long:t.short;throw new Error(`Cannot add option '${t.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${n}'
-  already used by option '${r.flags}'`)}this._initOptionGroup(t),this.options.push(t)}_registerCommand(t){let r=i=>[i.name()].concat(i.aliases()),n=r(t).find(i=>this._findCommand(i));if(n){let i=r(this._findCommand(n)).join("|"),s=r(t).join("|");throw new Error(`cannot add command '${s}' as already have command '${i}'`)}this._initCommandGroup(t),this.commands.push(t)}addOption(t){this._registerOption(t);let r=t.name(),n=t.attributeName();if(t.negate){let s=t.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(n,t.defaultValue===void 0?!0:t.defaultValue,"default")}else t.defaultValue!==void 0&&this.setOptionValueWithSource(n,t.defaultValue,"default");let i=(s,o,a)=>{s==null&&t.presetArg!==void 0&&(s=t.presetArg);let u=this.getOptionValue(n);s!==null&&t.parseArg?s=this._callParseArg(t,s,u,o):s!==null&&t.variadic&&(s=t._collectValue(s,u)),s==null&&(t.negate?s=!1:t.isBoolean()||t.optional?s=!0:s=""),this.setOptionValueWithSource(n,s,a)};return this.on("option:"+r,s=>{let o=`error: option '${t.flags}' argument '${s}' is invalid.`;i(s,o,"cli")}),t.envVar&&this.on("optionEnv:"+r,s=>{let o=`error: option '${t.flags}' value '${s}' from env '${t.envVar}' is invalid.`;i(s,o,"env")}),this}_optionEx(t,r,n,i,s){if(typeof r=="object"&&r instanceof vl)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let o=this.createOption(r,n);if(o.makeOptionMandatory(!!t.mandatory),typeof i=="function")o.default(s).argParser(i);else if(i instanceof RegExp){let a=i;i=(u,c)=>{let l=a.exec(u);return l?l[0]:c},o.default(s).argParser(i)}else o.default(i);return this.addOption(o)}option(t,r,n,i){return this._optionEx({},t,r,n,i)}requiredOption(t,r,n,i){return this._optionEx({mandatory:!0},t,r,n,i)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){return this._passThroughOptions=!!t,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(t=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!t,this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,r){return this.setOptionValueWithSource(t,r,void 0)}setOptionValueWithSource(t,r,n){return this._storeOptionsAsProperties?this[t]=r:this._optionValues[t]=r,this._optionValueSources[t]=n,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let r;return this._getCommandAndAncestors().forEach(n=>{n.getOptionValueSource(t)!==void 0&&(r=n.getOptionValueSource(t))}),r}_prepareUserArgs(t,r){if(t!==void 0&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");if(r=r||{},t===void 0&&r.from===void 0){q.versions?.electron&&(r.from="electron");let i=q.execArgv??[];(i.includes("-e")||i.includes("--eval")||i.includes("-p")||i.includes("--print"))&&(r.from="eval")}t===void 0&&(t=q.argv),this.rawArgs=t.slice();let n;switch(r.from){case void 0:case"node":this._scriptPath=t[1],n=t.slice(2);break;case"electron":q.defaultApp?(this._scriptPath=t[1],n=t.slice(2)):n=t.slice(1);break;case"user":n=t.slice(0);break;case"eval":n=t.slice(1);break;default:throw new Error(`unexpected parse option { from: '${r.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(t,r){this._prepareForParse();let n=this._prepareUserArgs(t,r);return this._parseCommand([],n),this}async parseAsync(t,r){this._prepareForParse();let n=this._prepareUserArgs(t,r);return await this._parseCommand([],n),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(t,r,n){if(Ir.existsSync(t))return;let i=r?`searched for local subcommand relative to directory '${r}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",s=`'${t}' does not exist
 - if '${n}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${i}`;throw new Error(s)}_executeSubCommand(t,r){r=r.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function s(l,f){let h=Fe.resolve(l,f);if(Ir.existsSync(h))return h;if(i.includes(Fe.extname(f)))return;let m=i.find(p=>Ir.existsSync(`${h}${p}`));if(m)return`${h}${m}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let l;try{l=Ir.realpathSync(this._scriptPath)}catch{l=this._scriptPath}a=Fe.resolve(Fe.dirname(l),a)}if(a){let l=s(a,o);if(!l&&!t._executableFile&&this._scriptPath){let f=Fe.basename(this._scriptPath,Fe.extname(this._scriptPath));f!==this._name&&(l=s(a,`${f}-${t._name}`))}o=l||o}n=i.includes(Fe.extname(o));let u;q.platform!=="win32"?n?(r.unshift(o),r=El(q.execArgv).concat(r),u=Zi.spawn(q.argv[0],r,{stdio:"inherit"})):u=Zi.spawn(o,r,{stdio:"inherit"}):(this._checkForMissingExecutable(o,a,t._name),r.unshift(o),r=El(q.execArgv).concat(r),u=Zi.spawn(q.execPath,r,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(f=>{q.on(f,()=>{u.killed===!1&&u.exitCode===null&&u.kill(f)})});let c=this._exitCallback;u.on("close",l=>{l=l??1,c?c(new es(l,"commander.executeSubCommandAsync","(close)")):q.exit(l)}),u.on("error",l=>{if(l.code==="ENOENT")this._checkForMissingExecutable(o,a,t._name);else if(l.code==="EACCES")throw new Error(`'${o}' not executable`);if(!c)q.exit(1);else{let f=new es(1,"commander.executeSubCommandAsync","(error)");f.nestedError=l,c(f)}}),this.runningCommand=u}_dispatchSubcommand(t,r,n){let i=this._findCommand(t);i||this.help({error:!0}),i._prepareForParse();let s;return s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,()=>{if(i._executableHandler)this._executeSubCommand(i,r.concat(n));else return i._parseCommand(r,n)}),s}_dispatchHelpCommand(t){t||this.help();let r=this._findCommand(t);return r&&!r._executableHandler&&r.help(),this._dispatchSubcommand(t,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((t,r)=>{t.required&&this.args[r]==null&&this.missingArgument(t.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let t=(n,i,s)=>{let o=i;if(i!==null&&n.parseArg){let a=`error: command-argument value '${i}' is invalid for argument '${n.name()}'.`;o=this._callParseArg(n,i,s,a)}return o};this._checkNumberOfArguments();let r=[];this.registeredArguments.forEach((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce((o,a)=>t(n,a,o),n.defaultValue))):s===void 0&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=t(n,s,n.defaultValue))),r[i]=s}),this.processedArgs=r}_chainOrCall(t,r){return t?.then&&typeof t.then=="function"?t.then(()=>r()):r()}_chainOrCallHooks(t,r){let n=t,i=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[r]!==void 0).forEach(s=>{s._lifeCycleHooks[r].forEach(o=>{i.push({hookedCommand:s,callback:o})})}),r==="postAction"&&i.reverse(),i.forEach(s=>{n=this._chainOrCall(n,()=>s.callback(s.hookedCommand,this))}),n}_chainOrCallSubCommandHook(t,r,n){let i=t;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(s=>{i=this._chainOrCall(i,()=>s(this,r))}),i}_parseCommand(t,r){let n=this.parseOptions(r);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(n.operands),r=n.unknown,this.args=t.concat(r),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),r);if(this._getHelpCommand()&&t[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(t[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(r),this._dispatchSubcommand(this._defaultCommandName,t,r);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},s=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let o;return o=this._chainOrCallHooks(o,"preAction"),o=this._chainOrCall(o,()=>this._actionHandler(this.processedArgs)),this.parent&&(o=this._chainOrCall(o,()=>{this.parent.emit(s,t,r)})),o=this._chainOrCallHooks(o,"postAction"),o}if(this.parent?.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,t,r);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,r);this.listenerCount("command:*")?this.emit("command:*",t,r):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(t){if(t)return this.commands.find(r=>r._name===t||r._aliases.includes(t))}_findOption(t){return this.options.find(r=>r.is(t))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(t=>{t.options.forEach(r=>{r.mandatory&&t.getOptionValue(r.attributeName())===void 0&&t.missingMandatoryOptionValue(r)})})}_checkForConflictingLocalOptions(){let t=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});t.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=t.find(s=>n.conflictsWith.includes(s.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(t=>{t._checkForConflictingLocalOptions()})}parseOptions(t){let r=[],n=[],i=r;function s(l){return l.length>1&&l[0]==="-"}let o=l=>/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(l)?!this._getCommandAndAncestors().some(f=>f.options.map(h=>h.short).some(h=>/^-\d$/.test(h))):!1,a=null,u=null,c=0;for(;c<t.length||u;){let l=u??t[c++];if(u=null,l==="--"){i===n&&i.push(l),i.push(...t.slice(c));break}if(a&&(!s(l)||o(l))){this.emit(`option:${a.name()}`,l);continue}if(a=null,s(l)){let f=this._findOption(l);if(f){if(f.required){let h=t[c++];h===void 0&&this.optionMissingArgument(f),this.emit(`option:${f.name()}`,h)}else if(f.optional){let h=null;c<t.length&&(!s(t[c])||o(t[c]))&&(h=t[c++]),this.emit(`option:${f.name()}`,h)}else this.emit(`option:${f.name()}`);a=f.variadic?f:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let f=this._findOption(`-${l[1]}`);if(f){f.required||f.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${f.name()}`,l.slice(2)):(this.emit(`option:${f.name()}`),u=`-${l.slice(2)}`);continue}}if(/^--[^=]+=/.test(l)){let f=l.indexOf("="),h=this._findOption(l.slice(0,f));if(h&&(h.required||h.optional)){this.emit(`option:${h.name()}`,l.slice(f+1));continue}}if(i===r&&s(l)&&!(this.commands.length===0&&o(l))&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&r.length===0&&n.length===0){if(this._findCommand(l)){r.push(l),n.push(...t.slice(c));break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){r.push(l,...t.slice(c));break}else if(this._defaultCommandName){n.push(l,...t.slice(c));break}}if(this._passThroughOptions){i.push(l,...t.slice(c));break}i.push(l)}return{operands:r,unknown:n}}opts(){if(this._storeOptionsAsProperties){let t={},r=this.options.length;for(let n=0;n<r;n++){let i=this.options[n].attributeName();t[i]=i===this._versionOptionName?this._version:this[i]}return t}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((t,r)=>Object.assign(t,r.opts()),{})}error(t,r){this._outputConfiguration.outputError(`${t}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=r||{},i=n.exitCode||1,s=n.code||"commander.error";this._exit(i,s,t)}_parseOptionsEnv(){this.options.forEach(t=>{if(t.envVar&&t.envVar in q.env){let r=t.attributeName();(this.getOptionValue(r)===void 0||["default","config","env"].includes(this.getOptionValueSource(r)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,q.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}})}_parseOptionsImplied(){let t=new g_(this.options),r=n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n));this.options.filter(n=>n.implied!==void 0&&r(n.attributeName())&&t.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!r(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(t){let r=`error: missing required argument '${t}'`;this.error(r,{code:"commander.missingArgument"})}optionMissingArgument(t){let r=`error: option '${t.flags}' argument missing`;this.error(r,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){let r=`error: required option '${t.flags}' not specified`;this.error(r,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,r){let n=o=>{let a=o.attributeName(),u=this.getOptionValue(a),c=this.options.find(f=>f.negate&&a===f.attributeName()),l=this.options.find(f=>!f.negate&&a===f.attributeName());return c&&(c.presetArg===void 0&&u===!1||c.presetArg!==void 0&&u===c.presetArg)?c:l||o},i=o=>{let a=n(o),u=a.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${a.envVar}'`:`option '${a.flags}'`},s=`error: ${i(t)} cannot be used with ${i(r)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let r="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{let o=s.createHelp().visibleOptions(s).filter(a=>a.long).map(a=>a.long);i=i.concat(o),s=s.parent}while(s&&!s._enablePositionalOptions);r=Al(t,i)}let n=`error: unknown option '${t}'${r}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;let r=this.registeredArguments.length,n=r===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${r} argument${n} but got ${t.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let t=this.args[0],r="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(s=>{i.push(s.name()),s.alias()&&i.push(s.alias())}),r=Al(t,i)}let n=`error: unknown command '${t}'${r}`;this.error(n,{code:"commander.unknownCommand"})}version(t,r,n){if(t===void 0)return this._version;this._version=t,r=r||"-V, --version",n=n||"output the version number";let i=this.createOption(r,n);return this._versionOptionName=i.attributeName(),this._registerOption(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${t}
`),this._exit(0,"commander.version",t)}),this}description(t,r){return t===void 0&&r===void 0?this._description:(this._description=t,r&&(this._argsDescription=r),this)}summary(t){return t===void 0?this._summary:(this._summary=t,this)}alias(t){if(t===void 0)return this._aliases[0];let r=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(r=this.commands[this.commands.length-1]),t===r._name)throw new Error("Command alias can't be the same as its name");let n=this.parent?._findCommand(t);if(n){let i=[n.name()].concat(n.aliases()).join("|");throw new Error(`cannot add alias '${t}' to command '${this.name()}' as already have command '${i}'`)}return r._aliases.push(t),this}aliases(t){return t===void 0?this._aliases:(t.forEach(r=>this.alias(r)),this)}usage(t){if(t===void 0){if(this._usage)return this._usage;let r=this.registeredArguments.map(n=>p_(n));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?r:[]).join(" ")}return this._usage=t,this}name(t){return t===void 0?this._name:(this._name=t,this)}helpGroup(t){return t===void 0?this._helpGroupHeading??"":(this._helpGroupHeading=t,this)}commandsGroup(t){return t===void 0?this._defaultCommandGroup??"":(this._defaultCommandGroup=t,this)}optionsGroup(t){return t===void 0?this._defaultOptionGroup??"":(this._defaultOptionGroup=t,this)}_initOptionGroup(t){this._defaultOptionGroup&&!t.helpGroupHeading&&t.helpGroup(this._defaultOptionGroup)}_initCommandGroup(t){this._defaultCommandGroup&&!t.helpGroup()&&t.helpGroup(this._defaultCommandGroup)}nameFromFilename(t){return this._name=Fe.basename(t,Fe.extname(t)),this}executableDir(t){return t===void 0?this._executableDir:(this._executableDir=t,this)}helpInformation(t){let r=this.createHelp(),n=this._getOutputContext(t);r.prepareContext({error:n.error,helpWidth:n.helpWidth,outputHasColors:n.hasColors});let i=r.formatHelp(this,r);return n.hasColors?i:this._outputConfiguration.stripColor(i)}_getOutputContext(t){t=t||{};let r=!!t.error,n,i,s;return r?(n=a=>this._outputConfiguration.writeErr(a),i=this._outputConfiguration.getErrHasColors(),s=this._outputConfiguration.getErrHelpWidth()):(n=a=>this._outputConfiguration.writeOut(a),i=this._outputConfiguration.getOutHasColors(),s=this._outputConfiguration.getOutHelpWidth()),{error:r,write:a=>(i||(a=this._outputConfiguration.stripColor(a)),n(a)),hasColors:i,helpWidth:s}}outputHelp(t){let r;typeof t=="function"&&(r=t,t=void 0);let n=this._getOutputContext(t),i={error:n.error,write:n.write,command:this};this._getCommandAndAncestors().reverse().forEach(o=>o.emit("beforeAllHelp",i)),this.emit("beforeHelp",i);let s=this.helpInformation({error:n.error});if(r&&(s=r(s),typeof s!="string"&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(s),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",i),this._getCommandAndAncestors().forEach(o=>o.emit("afterAllHelp",i))}helpOption(t,r){return typeof t=="boolean"?(t?(this._helpOption===null&&(this._helpOption=void 0),this._defaultOptionGroup&&this._initOptionGroup(this._getHelpOption())):this._helpOption=null,this):(this._helpOption=this.createOption(t??"-h, --help",r??"display help for command"),(t||r)&&this._initOptionGroup(this._helpOption),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(t){return this._helpOption=t,this._initOptionGroup(t),this}help(t){this.outputHelp(t);let r=Number(q.exitCode??0);r===0&&t&&typeof t!="function"&&t.error&&(r=1),this._exit(r,"commander.help","(outputHelp)")}addHelpText(t,r){let n=["beforeAll","before","after","afterAll"];if(!n.includes(t))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${t}Help`;return this.on(i,s=>{let o;typeof r=="function"?o=r({error:s.error,command:s.command}):o=r,o&&s.write(`${o}
`)}),this}_outputHelpIfRequested(t){let r=this._getHelpOption();r&&t.find(i=>r.is(i))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function El(e){return e.map(t=>{if(!t.startsWith("--inspect"))return t;let r,n="127.0.0.1",i="9229",s;return(s=t.match(/^(--inspect(-brk)?)$/))!==null?r=s[1]:(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(r=s[1],/^\d+$/.test(s[3])?i=s[3]:n=s[3]):(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(r=s[1],n=s[3],i=s[4]),r&&i!=="0"?`${r}=${n}:${parseInt(i)+1}`:t})}function rs(){if(q.env.NO_COLOR||q.env.FORCE_COLOR==="0"||q.env.FORCE_COLOR==="false")return!1;if(q.env.FORCE_COLOR||q.env.CLICOLOR_FORCE!==void 0)return!0}ns.Command=ts;ns.useColor=rs});var Rl=d(Ee=>{"use strict";var{Argument:wl}=kr(),{Command:is}=xl(),{CommanderError:__,InvalidArgumentError:Cl}=Dt(),{Help:y_}=Yi(),{Option:Ol}=Xi();Ee.program=new is;Ee.createCommand=e=>new is(e);Ee.createOption=(e,t)=>new Ol(e,t);Ee.createArgument=(e,t)=>new wl(e,t);Ee.Command=is;Ee.Option=Ol;Ee.Argument=wl;Ee.Help=y_;Ee.CommanderError=__;Ee.InvalidArgumentError=Cl;Ee.InvalidOptionArgumentError=Cl});var As=d(Uc=>{"use strict";Uc.parse=function(e,t){return new vs(e,t).parse()};var vs=class e{constructor(t,r){this.source=t,this.transform=r||V0,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,n,i;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!i)this.dimension++,this.dimension>1&&(n=new e(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(i&&this.newEntry(!0),i=!i):r.value===","&&!i?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function V0(e){return e}});var Es=d((dx,Qc)=>{"use strict";var W0=As();Qc.exports={create:function(e,t){return{parse:function(){return W0.parse(e,t)}}}}});var Wc=d((mx,Vc)=>{"use strict";var Y0=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,K0=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,J0=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,z0=/^-?infinity$/;Vc.exports=function(t){if(z0.test(t))return Number(t.replace("i","I"));var r=Y0.exec(t);if(!r)return X0(t)||null;var n=!!r[8],i=parseInt(r[1],10);n&&(i=Gc(i));var s=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),u=parseInt(r[5],10),c=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var f,h=Z0(t);return h!=null?(f=new Date(Date.UTC(i,s,o,a,u,c,l)),xs(i)&&f.setUTCFullYear(i),h!==0&&f.setTime(f.getTime()-h)):(f=new Date(i,s,o,a,u,c,l),xs(i)&&f.setFullYear(i)),f};function X0(e){var t=K0.exec(e);if(t){var r=parseInt(t[1],10),n=!!t[4];n&&(r=Gc(r));var i=parseInt(t[2],10)-1,s=t[3],o=new Date(r,i,s);return xs(r)&&o.setFullYear(r),o}}function Z0(e){if(e.endsWith("+00"))return 0;var t=J0.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var n=r==="-"?-1:1,i=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return i*n*1e3}}function Gc(e){return-(e-1)}function xs(e){return e>=0&&e<100}});var Kc=d((gx,Yc)=>{"use strict";Yc.exports=tS;var eS=Object.prototype.hasOwnProperty;function tS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)eS.call(r,n)&&(e[n]=r[n])}return e}});var Xc=d((_x,zc)=>{"use strict";var rS=Kc();zc.exports=bt;function bt(e){if(!(this instanceof bt))return new bt(e);rS(this,dS(e))}var nS=["seconds","minutes","hours","days","months","years"];bt.prototype.toPostgres=function(){var e=nS.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var iS={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},sS=["years","months","days"],oS=["hours","minutes","seconds"];bt.prototype.toISOString=bt.prototype.toISO=function(){var e=sS.map(r,this).join(""),t=oS.map(r,this).join("");return"P"+e+"T"+t;function r(n){var i=this[n]||0;return n==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+iS[n]}};var ws="([+-]?\\d+)",aS=ws+"\\s+years?",uS=ws+"\\s+mons?",lS=ws+"\\s+days?",cS="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",fS=new RegExp([aS,uS,lS,cS].map(function(e){return"("+e+")?"}).join("\\s*")),Jc={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},hS=["hours","minutes","seconds","milliseconds"];function pS(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function dS(e){if(!e)return{};var t=fS.exec(e),r=t[8]==="-";return Object.keys(Jc).reduce(function(n,i){var s=Jc[i],o=t[s];return!o||(o=i==="milliseconds"?pS(o):parseInt(o,10),!o)||(r&&~hS.indexOf(i)&&(o*=-1),n[i]=o),n},{})}});var tf=d((yx,ef)=>{"use strict";var Zc=Buffer.from||Buffer;ef.exports=function(t){if(/^\\x/.test(t))return Zc(t.substr(2),"hex");for(var r="",n=0;n<t.length;)if(t[n]!=="\\")r+=t[n],++n;else if(/[0-7]{3}/.test(t.substr(n+1,3)))r+=String.fromCharCode(parseInt(t.substr(n+1,3),8)),n+=4;else{for(var i=1;n+i<t.length&&t[n+i]==="\\";)i++;for(var s=0;s<Math.floor(i/2);++s)r+="\\";n+=Math.floor(i/2)*2}return Zc(r,"binary")}});var lf=d((Sx,uf)=>{"use strict";var Bt=As(),jt=Es(),$r=Wc(),nf=Xc(),sf=tf();function Br(e){return function(r){return r===null?r:e(r)}}function of(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function mS(e){return e?Bt.parse(e,of):null}function gS(e){return parseInt(e,10)}function Cs(e){return e?Bt.parse(e,Br(gS)):null}function _S(e){return e?Bt.parse(e,Br(function(t){return af(t).trim()})):null}var yS=function(e){if(!e)return null;var t=jt.create(e,function(r){return r!==null&&(r=Ps(r)),r});return t.parse()},Os=function(e){if(!e)return null;var t=jt.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},xe=function(e){if(!e)return null;var t=jt.create(e);return t.parse()},Rs=function(e){if(!e)return null;var t=jt.create(e,function(r){return r!==null&&(r=$r(r)),r});return t.parse()},SS=function(e){if(!e)return null;var t=jt.create(e,function(r){return r!==null&&(r=nf(r)),r});return t.parse()},bS=function(e){return e?Bt.parse(e,Br(sf)):null},Ts=function(e){return parseInt(e,10)},af=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},rf=function(e){return e?Bt.parse(e,Br(JSON.parse)):null},Ps=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},vS=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++){if(n||(t+=e[i]),e[i]===")"){n=!0;continue}else if(!n)continue;e[i]!==","&&(r+=e[i])}var s=Ps(t);return s.radius=parseFloat(r),s},AS=function(e){e(20,af),e(21,Ts),e(23,Ts),e(26,Ts),e(700,parseFloat),e(701,parseFloat),e(16,of),e(1082,$r),e(1114,$r),e(1184,$r),e(600,Ps),e(651,xe),e(718,vS),e(1e3,mS),e(1001,bS),e(1005,Cs),e(1007,Cs),e(1028,Cs),e(1016,_S),e(1017,yS),e(1021,Os),e(1022,Os),e(1231,Os),e(1014,xe),e(1015,xe),e(1008,xe),e(1009,xe),e(1040,xe),e(1041,xe),e(1115,Rs),e(1182,Rs),e(1185,Rs),e(1186,nf),e(1187,SS),e(17,sf),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,rf),e(3807,rf),e(3907,xe),e(2951,xe),e(791,xe),e(1183,xe),e(1270,xe)};uf.exports={init:AS}});var ff=d((bx,cf)=>{"use strict";var de=1e6;function ES(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(r===0),r=~r+1>>>0,n="-");var i="",s,o,a,u,c,l;{if(s=t%de,t=t/de>>>0,o=4294967296*s+r,r=o/de>>>0,a=""+(o-de*r),r===0&&t===0)return n+a+i;for(u="",c=6-a.length,l=0;l<c;l++)u+="0";i=u+a+i}{if(s=t%de,t=t/de>>>0,o=4294967296*s+r,r=o/de>>>0,a=""+(o-de*r),r===0&&t===0)return n+a+i;for(u="",c=6-a.length,l=0;l<c;l++)u+="0";i=u+a+i}{if(s=t%de,t=t/de>>>0,o=4294967296*s+r,r=o/de>>>0,a=""+(o-de*r),r===0&&t===0)return n+a+i;for(u="",c=6-a.length,l=0;l<c;l++)u+="0";i=u+a+i}return s=t%de,o=4294967296*s+r,a=""+o%de,n+a+i}cf.exports=ES});var gf=d((vx,mf)=>{"use strict";var xS=ff(),G=function(e,t,r,n,i){r=r||0,n=n||!1,i=i||function(m,p,y){return m*Math.pow(2,y)+p};var s=r>>3,o=function(m){return n?~m&255:m},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a=a>>r%8);var c=0;r%8+t>=8&&(c=i(0,o(e[s])&a,u));for(var l=t+r>>3,f=s+1;f<l;f++)c=i(c,o(e[f]),8);var h=(t+r)%8;return h>0&&(c=i(c,o(e[l])>>8-h,h)),c},df=function(e,t,r){var n=Math.pow(2,r-1)-1,i=G(e,1),s=G(e,r,1);if(s===0)return 0;var o=1,a=function(c,l,f){c===0&&(c=1);for(var h=1;h<=f;h++)o/=2,(l&1<<f-h)>0&&(c+=o);return c},u=G(e,t,r+1,!1,a);return s==Math.pow(2,r+1)-1?u===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,s-n)*u},wS=function(e){return G(e,1)==1?-1*(G(e,15,1,!0)+1):G(e,15,1)},hf=function(e){return G(e,1)==1?-1*(G(e,31,1,!0)+1):G(e,31,1)},CS=function(e){return df(e,23,8)},OS=function(e){return df(e,52,11)},RS=function(e){var t=G(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,G(e,16,16)),n=0,i=[],s=G(e,16),o=0;o<s;o++)n+=G(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,G(e,16,48));return(t===0?1:-1)*Math.round(n*a)/a},pf=function(e,t){var r=G(t,1),n=G(t,63,1),i=new Date((r===0?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(s){this.usec=s},i.getUTCMicroSeconds=function(){return this.usec},i},Ut=function(e){for(var t=G(e,32),r=G(e,32,32),n=G(e,32,64),i=96,s=[],o=0;o<t;o++)s[o]=G(e,32,i),i+=32,i+=32;var a=function(c){var l=G(e,32,i);if(i+=32,l==4294967295)return null;var f;if(c==23||c==20)return f=G(e,l*8,i),i+=l*8,f;if(c==25)return f=e.toString(this.encoding,i>>3,(i+=l<<3)>>3),f;console.log("ERROR: ElementType not implemented: "+c)},u=function(c,l){var f=[],h;if(c.length>1){var m=c.shift();for(h=0;h<m;h++)f[h]=u(c,l);c.unshift(m)}else for(h=0;h<c[0];h++)f[h]=a(l);return f};return u(s,n)},TS=function(e){return e.toString("utf8")},PS=function(e){return e===null?null:G(e,8)>0},kS=function(e){e(20,xS),e(21,wS),e(23,hf),e(26,hf),e(1700,RS),e(700,CS),e(701,OS),e(16,PS),e(1114,pf.bind(null,!1)),e(1184,pf.bind(null,!0)),e(1e3,Ut),e(1007,Ut),e(1016,Ut),e(1008,Ut),e(1009,Ut),e(25,TS)};mf.exports={init:kS}});var yf=d((Ax,_f)=>{"use strict";_f.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Vt=d(Gt=>{"use strict";var IS=lf(),LS=gf(),MS=Es(),DS=yf();Gt.getTypeParser=qS;Gt.setTypeParser=FS;Gt.arrayParser=MS;Gt.builtins=DS;var Qt={text:{},binary:{}};function Sf(e){return String(e)}function qS(e,t){return t=t||"text",Qt[t]&&Qt[t][e]||Sf}function FS(e,t,r){typeof t=="function"&&(r=t,t="text"),Qt[t][e]=r}IS.init(function(e,t){Qt.text[e]=t});LS.init(function(e,t){Qt.binary[e]=t})});var Wt=d((xx,ks)=>{"use strict";var bf;try{bf=process.platform==="win32"?process.env.USERNAME:process.env.USER}catch{}ks.exports={host:"localhost",user:bf,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var vt=Vt(),NS=vt.getTypeParser(20,"text"),HS=vt.getTypeParser(1016,"text");ks.exports.__defineSetter__("parseInt8",function(e){vt.setTypeParser(20,"text",e?vt.getTypeParser(23,"text"):NS),vt.setTypeParser(1016,"text",e?vt.getTypeParser(1007,"text"):HS)})});var At=d((wx,Ef)=>{"use strict";var $S=Wt(),vf=require("util"),{isDate:BS}=vf.types||vf;function jS(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Af(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+Af(e[r]);else if(ArrayBuffer.isView(e[r])){let n=e[r];if(!(n instanceof Buffer)){let i=Buffer.from(n.buffer,n.byteOffset,n.byteLength);i.length===n.byteLength?n=i:n=i.slice(n.byteOffset,n.byteOffset+n.byteLength)}t+="\\\\x"+n.toString("hex")}else t+=jS(jr(e[r]));return t=t+"}",t}var jr=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return BS(e)?$S.parseInputDatesAsUTC?GS(e):QS(e):Array.isArray(e)?Af(e):US(e,t)}return e.toString()};function US(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),jr(e.toPostgres(jr),t)}return JSON.stringify(e)}function QS(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let i=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(i+="-",t*=-1):i+="+",i+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),n&&(i+=" BC"),i}function GS(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let n=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function VS(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var WS=function(e){return'"'+e.replace(/"/g,'""')+'"'},YS=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let n=0;n<e.length;n++){let i=e[n];i==="'"?r+=i+i:i==="\\"?(r+=i+i,t=!0):r+=i}return r+="'",t===!0&&(r=" E"+r),r};Ef.exports={prepareValue:function(t){return jr(t)},normalizeQueryConfig:VS,escapeIdentifier:WS,escapeLiteral:YS}});var wf=d((Cx,xf)=>{"use strict";var Et=require("crypto");function Is(e){return Et.createHash("md5").update(e,"utf-8").digest("hex")}function KS(e,t,r){let n=Is(t+e);return"md5"+Is(Buffer.concat([Buffer.from(n),r]))}function JS(e){return Et.createHash("sha256").update(e).digest()}function zS(e,t){return e=e.replace(/(\D)-/,"$1"),Et.createHash(e).update(t).digest()}function XS(e,t){return Et.createHmac("sha256",e).update(t).digest()}async function ZS(e,t,r){return Et.pbkdf2Sync(e,t,r,32,"sha256")}xf.exports={postgresMd5PasswordHash:KS,randomBytes:Et.randomBytes,deriveKey:ZS,sha256:JS,hashByName:zS,hmacSha256:XS,md5:Is}});var Tf=d((Ox,Rf)=>{"use strict";var Cf=require("crypto");Rf.exports={postgresMd5PasswordHash:tb,randomBytes:eb,deriveKey:sb,sha256:rb,hashByName:nb,hmacSha256:ib,md5:Ls};var Of=Cf.webcrypto||globalThis.crypto,ot=Of.subtle,Ms=new TextEncoder;function eb(e){return Of.getRandomValues(Buffer.alloc(e))}async function Ls(e){try{return Cf.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?Ms.encode(e):e,n=await ot.digest("MD5",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function tb(e,t,r){let n=await Ls(t+e);return"md5"+await Ls(Buffer.concat([Buffer.from(n),r]))}async function rb(e){return await ot.digest("SHA-256",e)}async function nb(e,t){return await ot.digest(e,t)}async function ib(e,t){let r=await ot.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await ot.sign("HMAC",r,Ms.encode(t))}async function sb(e,t,r){let n=await ot.importKey("raw",Ms.encode(e),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await ot.deriveBits(i,n,256,["deriveBits"])}});var qs=d((Rx,Ds)=>{"use strict";var ob=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;ob?Ds.exports=wf():Ds.exports=Tf()});var If=d((Tx,kf)=>{"use strict";function at(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function Fs(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let n=r&127;if(n>4)throw at("bad length",e);r=0;for(let i=0;i<n;i++)r=r<<8|e[t++];return{length:r,index:t}}function Pf(e,t){if(e[t++]!==6)throw at("non-OID data",e);let{length:r,index:n}=Fs(e,t);t=n;let i=t+r,s=e[t++],o=(s/40>>0)+"."+s%40;for(;t<i;){let a=0;for(;t<i;){let u=e[t++];if(a=a<<7|u&127,u<128)break}o+="."+a}return{oid:o,index:t}}function Yt(e,t){if(e[t++]!==48)throw at("non-sequence data",e);return Fs(e,t)}function ab(e,t){t===void 0&&(t=0),t=Yt(e,t).index;let{length:r,index:n}=Yt(e,t);t=n+r,t=Yt(e,t).index;let{oid:i,index:s}=Pf(e,t);switch(i){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=s,t=Yt(e,t).index,e[t++]!==160)throw at("non-tag data",e);t=Fs(e,t).index,t=Yt(e,t).index;let{oid:o}=Pf(e,t);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw at("unknown hash OID "+o,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw at("Ed448 certificate channel binding is not currently supported by Postgres")}throw at("unknown OID "+i,e)}kf.exports={signatureAlgorithmHashFromCertificate:ab}});var qf=d((Px,Df)=>{"use strict";var ze=qs(),{signatureAlgorithmHashFromCertificate:ub}=If();function lb(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>e.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let i=ze.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:i,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+i,message:"SASLInitialResponse"}}async function cb(e,t,r,n){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=pb(r);if(i.nonce.startsWith(e.clientNonce)){if(i.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let s="n=*,r="+e.clientNonce,o="r="+i.nonce+",s="+i.salt+",i="+i.iteration,a=n?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let v=n.getPeerCertificate().raw,L=ub(v);(L==="MD5"||L==="SHA-1")&&(L="SHA-256");let re=await ze.hashByName(L,v);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(re)]).toString("base64")}let u="c="+a+",r="+i.nonce,c=s+","+o+","+u,l=Buffer.from(i.salt,"base64"),f=await ze.deriveKey(t,l,i.iteration),h=await ze.hmacSha256(f,"Client Key"),m=await ze.sha256(h),p=await ze.hmacSha256(m,c),y=mb(Buffer.from(h),Buffer.from(p)).toString("base64"),x=await ze.hmacSha256(f,"Server Key"),C=await ze.hmacSha256(x,c);e.message="SASLResponse",e.serverSignature=Buffer.from(C).toString("base64"),e.response=u+",p="+y}function fb(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=db(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function hb(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function Lf(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function Mf(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],n=t.substring(2);return[r,n]}))}function pb(e){let t=Mf(e),r=t.get("r");if(r){if(!hb(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=t.get("s");if(n){if(!Lf(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=t.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let s=parseInt(i,10);return{nonce:r,salt:n,iteration:s}}function db(e){let r=Mf(e).get("v");if(r){if(!Lf(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function mb(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,n)=>e[n]^t[n]))}Df.exports={startSession:lb,continueSession:cb,finalizeSession:fb}});var Qr=d((kx,Ff)=>{"use strict";var gb=Vt();function Ur(e){this._types=e||gb,this.text={},this.binary={}}Ur.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Ur.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Ur.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};Ff.exports=Ur});var $f=d((Ix,Hf)=>{"use strict";function xt(e,t={}){if(e.charAt(0)==="/"){let u=e.split(" ");return{host:u[0],database:u[1]}}let r={},n,i=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(e,"postgres://base")}catch{n=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),i=!0}}catch(u){throw u.input&&(u.input="*****REDACTED*****"),u}for(let u of n.searchParams.entries())r[u[0]]=u[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let s=i?"":n.hostname;r.host?s&&/^%2f/i.test(s)&&(n.pathname=s+n.pathname):r.host=decodeURIComponent(s),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":{r.sslmode!=="verify-full"&&Ns(r.sslmode);break}case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function _b(e){return Object.entries(e).reduce((r,[n,i])=>(i!=null&&(r[n]=i),r),{})}function Nf(e){return Object.entries(e).reduce((r,[n,i])=>{if(n==="ssl"){let s=i;typeof s=="boolean"&&(r[n]=s),typeof s=="object"&&(r[n]=_b(s))}else if(i!=null)if(n==="port"){if(i!==""){let s=parseInt(i,10);if(isNaN(s))throw new Error(`Invalid ${n}: ${i}`);r[n]=s}}else r[n]=i;return r},{})}function yb(e){return Nf(xt(e))}function Ns(e){!Ns.warned&&typeof process<"u"&&process.emitWarning&&(Ns.warned=!0,process.emitWarning(`SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=${e}'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.`))}Hf.exports=xt;xt.parse=xt;xt.toClientConfig=Nf;xt.parseIntoClientConfig=yb});var $s=d((Lx,Uf)=>{"use strict";var Sb=require("dns"),jf=Wt(),Bf=$f().parse,le=function(e,t,r){return t[e]?t[e]:(r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),r||jf[e])},bb=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return jf.ssl},wt=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},we=function(e,t,r){let n=t[r];n!=null&&e.push(r+"="+wt(n))},Hs=class{constructor(t){t=typeof t=="string"?Bf(t):t||{},t.connectionString&&(t=Object.assign({},t,Bf(t.connectionString))),this.user=le("user",t),this.database=le("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(le("port",t),10),this.host=le("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:le("password",t)}),this.binary=le("binary",t),this.options=le("options",t),this.ssl=typeof t.ssl>"u"?bb():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=le("client_encoding",t),this.replication=le("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=le("application_name",t,"PGAPPNAME"),this.fallback_application_name=le("fallback_application_name",t,!1),this.statement_timeout=le("statement_timeout",t,!1),this.lock_timeout=le("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=le("idle_in_transaction_session_timeout",t,!1),this.query_timeout=le("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];we(r,this,"user"),we(r,this,"password"),we(r,this,"port"),we(r,this,"application_name"),we(r,this,"fallback_application_name"),we(r,this,"connect_timeout"),we(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(we(r,n,"sslmode"),we(r,n,"sslca"),we(r,n,"sslkey"),we(r,n,"sslcert"),we(r,n,"sslrootcert"),this.database&&r.push("dbname="+wt(this.database)),this.replication&&r.push("replication="+wt(this.replication)),this.host&&r.push("host="+wt(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+wt(this.client_encoding)),Sb.lookup(this.host,function(i,s){return i?t(i,null):(r.push("hostaddr="+wt(s)),t(null,r.join(" ")))})}};Uf.exports=Hs});var js=d((Mx,Gf)=>{"use strict";var vb=Vt(),Qf=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,Bs=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=Qf.exec(t.text):r=Qf.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let n=0,i=t.length;n<i;n++){let s=t[n];s!==null?r[n]=this._parsers[n](s):r[n]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let n=0,i=t.length;n<i;n++){let s=t[n],o=this.fields[n].name;if(s!==null){let a=this.fields[n].format==="binary"?Buffer.from(s):s;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let n=0;n<t.length;n++){let i=t[n];r[i.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[n]=vb.getTypeParser(i.dataTypeID,i.format||"text")}this._prebuiltEmptyResultObject={...r}}};Gf.exports=Bs});var Kf=d((Dx,Yf)=>{"use strict";var{EventEmitter:Ab}=require("events"),Vf=js(),Wf=At(),Us=class extends Ab{constructor(t,r,n){super(),t=Wf.normalizeQueryConfig(t,r,n),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new Vf(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Vf(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Wf.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};Yf.exports=Us});var io=d(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.NoticeMessage=T.DataRowMessage=T.CommandCompleteMessage=T.ReadyForQueryMessage=T.NotificationResponseMessage=T.BackendKeyDataMessage=T.AuthenticationMD5Password=T.ParameterStatusMessage=T.ParameterDescriptionMessage=T.RowDescriptionMessage=T.Field=T.CopyResponse=T.CopyDataMessage=T.DatabaseError=T.copyDone=T.emptyQuery=T.replicationStart=T.portalSuspended=T.noData=T.closeComplete=T.bindComplete=T.parseComplete=void 0;T.parseComplete={name:"parseComplete",length:5};T.bindComplete={name:"bindComplete",length:5};T.closeComplete={name:"closeComplete",length:5};T.noData={name:"noData",length:5};T.portalSuspended={name:"portalSuspended",length:5};T.replicationStart={name:"replicationStart",length:4};T.emptyQuery={name:"emptyQuery",length:4};T.copyDone={name:"copyDone",length:4};var Qs=class extends Error{constructor(t,r,n){super(t),this.length=r,this.name=n}};T.DatabaseError=Qs;var Gs=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};T.CopyDataMessage=Gs;var Vs=class{constructor(t,r,n,i){this.length=t,this.name=r,this.binary=n,this.columnTypes=new Array(i)}};T.CopyResponse=Vs;var Ws=class{constructor(t,r,n,i,s,o,a){this.name=t,this.tableID=r,this.columnID=n,this.dataTypeID=i,this.dataTypeSize=s,this.dataTypeModifier=o,this.format=a}};T.Field=Ws;var Ys=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};T.RowDescriptionMessage=Ys;var Ks=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};T.ParameterDescriptionMessage=Ks;var Js=class{constructor(t,r,n){this.length=t,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};T.ParameterStatusMessage=Js;var zs=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};T.AuthenticationMD5Password=zs;var Xs=class{constructor(t,r,n){this.length=t,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};T.BackendKeyDataMessage=Xs;var Zs=class{constructor(t,r,n,i){this.length=t,this.processId=r,this.channel=n,this.payload=i,this.name="notification"}};T.NotificationResponseMessage=Zs;var eo=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};T.ReadyForQueryMessage=eo;var to=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};T.CommandCompleteMessage=to;var ro=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};T.DataRowMessage=ro;var no=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};T.NoticeMessage=no});var Jf=d(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.Writer=void 0;var so=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let n=this.buffer,i=n.length+(n.length>>1)+t;this.buffer=Buffer.allocUnsafe(i),n.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Gr.Writer=so});var Xf=d(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.serialize=void 0;var oo=Jf(),U=new oo.Writer,Eb=e=>{U.addInt16(3).addInt16(0);for(let n of Object.keys(e))U.addCString(n).addCString(e[n]);U.addCString("client_encoding").addCString("UTF8");let t=U.addCString("").flush(),r=t.length+4;return new oo.Writer().addInt32(r).add(t).flush()},xb=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},wb=e=>U.addCString(e).flush(112),Cb=function(e,t){return U.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),U.flush(112)},Ob=function(e){return U.addString(e).flush(112)},Rb=e=>U.addCString(e).flush(81),zf=[],Tb=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||zf,n=r.length,i=U.addCString(t).addCString(e.text).addInt16(n);for(let s=0;s<n;s++)i.addInt32(r[s]);return U.flush(80)},Ct=new oo.Writer,Pb=function(e,t){for(let r=0;r<e.length;r++){let n=t?t(e[r],r):e[r];n==null?(U.addInt16(0),Ct.addInt32(-1)):n instanceof Buffer?(U.addInt16(1),Ct.addInt32(n.length),Ct.add(n)):(U.addInt16(0),Ct.addInt32(Buffer.byteLength(n)),Ct.addString(n))}},kb=(e={})=>{let t=e.portal||"",r=e.statement||"",n=e.binary||!1,i=e.values||zf,s=i.length;return U.addCString(t).addCString(r),U.addInt16(s),Pb(i,e.valueMapper),U.addInt16(s),U.add(Ct.flush()),U.addInt16(1),U.addInt16(n?1:0),U.flush(66)},Ib=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Lb=e=>{if(!e||!e.portal&&!e.rows)return Ib;let t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(t,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(r,s.length-4),s},Mb=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},ao=(e,t)=>{let n=4+Buffer.byteLength(t)+1,i=Buffer.allocUnsafe(1+n);return i[0]=e,i.writeInt32BE(n,1),i.write(t,5,"utf-8"),i[n]=0,i},Db=U.addCString("P").flush(68),qb=U.addCString("S").flush(68),Fb=e=>e.name?ao(68,`${e.type}${e.name||""}`):e.type==="P"?Db:qb,Nb=e=>{let t=`${e.type}${e.name||""}`;return ao(67,t)},Hb=e=>U.add(e).flush(100),$b=e=>ao(102,e),Vr=e=>Buffer.from([e,0,0,0,4]),Bb=Vr(72),jb=Vr(83),Ub=Vr(88),Qb=Vr(99),Gb={startup:Eb,password:wb,requestSsl:xb,sendSASLInitialResponseMessage:Cb,sendSCRAMClientFinalMessage:Ob,query:Rb,parse:Tb,bind:kb,execute:Lb,describe:Fb,close:Nb,flush:()=>Bb,sync:()=>jb,end:()=>Ub,copyData:Hb,copyDone:()=>Qb,copyFail:$b,cancel:Mb};Wr.serialize=Gb});var Zf=d(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.BufferReader=void 0;var Vb=Buffer.allocUnsafe(0),uo=class{constructor(t=0){this.offset=t,this.buffer=Vb,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Yr.BufferReader=uo});var nh=d(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.Parser=void 0;var V=io(),Wb=Zf(),co=1,Yb=4,eh=co+Yb,Se=-1,lo=Buffer.allocUnsafe(0),fo=class{constructor(t){if(this.buffer=lo,this.bufferLength=0,this.bufferOffset=0,this.reader=new Wb.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let n=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+eh<=n;){let s=this.buffer[i],o=this.buffer.readUInt32BE(i+co),a=co+o;if(a+i<=n){let u=this.handlePacket(i+eh,s,o,this.buffer);r(u),i+=a}else break}i===n?(this.buffer=lo,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-i,this.bufferOffset=i)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let i;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let s=this.buffer.byteLength*2;for(;r>=s;)s*=2;i=Buffer.allocUnsafe(s)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,n,i){let{reader:s}=this;s.setBuffer(t,i);let o;switch(r){case 50:o=V.bindComplete;break;case 49:o=V.parseComplete;break;case 51:o=V.closeComplete;break;case 110:o=V.noData;break;case 115:o=V.portalSuspended;break;case 99:o=V.copyDone;break;case 87:o=V.replicationStart;break;case 73:o=V.emptyQuery;break;case 68:o=iv(s);break;case 67:o=Jb(s);break;case 90:o=Kb(s);break;case 65:o=ev(s);break;case 82:o=av(s,n);break;case 83:o=sv(s);break;case 75:o=ov(s);break;case 69:o=th(s,"error");break;case 78:o=th(s,"notice");break;case 84:o=tv(s);break;case 116:o=nv(s);break;case 71:o=Xb(s);break;case 72:o=Zb(s);break;case 100:o=zb(s,n);break;default:return new V.DatabaseError("received invalid response: "+r.toString(16),n,"error")}return s.setBuffer(0,lo),o.length=n,o}};Kr.Parser=fo;var Kb=e=>{let t=e.string(1);return new V.ReadyForQueryMessage(Se,t)},Jb=e=>{let t=e.cstring();return new V.CommandCompleteMessage(Se,t)},zb=(e,t)=>{let r=e.bytes(t-4);return new V.CopyDataMessage(Se,r)},Xb=e=>rh(e,"copyInResponse"),Zb=e=>rh(e,"copyOutResponse"),rh=(e,t)=>{let r=e.byte()!==0,n=e.int16(),i=new V.CopyResponse(Se,t,r,n);for(let s=0;s<n;s++)i.columnTypes[s]=e.int16();return i},ev=e=>{let t=e.int32(),r=e.cstring(),n=e.cstring();return new V.NotificationResponseMessage(Se,t,r,n)},tv=e=>{let t=e.int16(),r=new V.RowDescriptionMessage(Se,t);for(let n=0;n<t;n++)r.fields[n]=rv(e);return r},rv=e=>{let t=e.cstring(),r=e.uint32(),n=e.int16(),i=e.uint32(),s=e.int16(),o=e.int32(),a=e.int16()===0?"text":"binary";return new V.Field(t,r,n,i,s,o,a)},nv=e=>{let t=e.int16(),r=new V.ParameterDescriptionMessage(Se,t);for(let n=0;n<t;n++)r.dataTypeIDs[n]=e.int32();return r},iv=e=>{let t=e.int16(),r=new Array(t);for(let n=0;n<t;n++){let i=e.int32();r[n]=i===-1?null:e.string(i)}return new V.DataRowMessage(Se,r)},sv=e=>{let t=e.cstring(),r=e.cstring();return new V.ParameterStatusMessage(Se,t,r)},ov=e=>{let t=e.int32(),r=e.int32();return new V.BackendKeyDataMessage(Se,t,r)},av=(e,t)=>{let r=e.int32(),n={name:"authenticationOk",length:t};switch(r){case 0:break;case 3:n.length===8&&(n.name="authenticationCleartextPassword");break;case 5:if(n.length===12){n.name="authenticationMD5Password";let i=e.bytes(4);return new V.AuthenticationMD5Password(Se,i)}break;case 10:{n.name="authenticationSASL",n.mechanisms=[];let i;do i=e.cstring(),i&&n.mechanisms.push(i);while(i)}break;case 11:n.name="authenticationSASLContinue",n.data=e.string(t-8);break;case 12:n.name="authenticationSASLFinal",n.data=e.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+r)}return n},th=(e,t)=>{let r={},n=e.string(1);for(;n!=="\0";)r[n]=e.cstring(),n=e.string(1);let i=r.M,s=t==="notice"?new V.NoticeMessage(Se,i):new V.DatabaseError(i,Se,t);return s.severity=r.S,s.code=r.C,s.detail=r.D,s.hint=r.H,s.position=r.P,s.internalPosition=r.p,s.internalQuery=r.q,s.where=r.W,s.schema=r.s,s.table=r.t,s.column=r.c,s.dataType=r.d,s.constraint=r.n,s.file=r.F,s.line=r.L,s.routine=r.R,s}});var ho=d(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DatabaseError=Xe.serialize=Xe.parse=void 0;var uv=io();Object.defineProperty(Xe,"DatabaseError",{enumerable:!0,get:function(){return uv.DatabaseError}});var lv=Xf();Object.defineProperty(Xe,"serialize",{enumerable:!0,get:function(){return lv.serialize}});var cv=nh();function fv(e,t){let r=new cv.Parser;return e.on("data",n=>r.parse(n,t)),new Promise(n=>e.on("end",()=>n()))}Xe.parse=fv});var ih=d(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.default={}});var oh=d((Ux,sh)=>{"use strict";var{getStream:hv,getSecureStream:pv}=_v();sh.exports={getStream:hv,getSecureStream:pv};function dv(){function e(r){let n=require("net");return new n.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function mv(){function e(r){let{CloudflareSocket:n}=ih();return new n(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function gv(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function _v(){return gv()?mv():dv()}});var go=d((Qx,ah)=>{"use strict";var yv=require("events").EventEmitter,{parse:Sv,serialize:ee}=ho(),{getStream:bv,getSecureStream:vv}=oh(),Av=ee.flush(),Ev=ee.sync(),xv=ee.end(),mo=class extends yv{constructor(t){super(),t=t||{},this.stream=t.stream||bv(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(t,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let i=function(s){n._ending&&(s.code==="ECONNRESET"||s.code==="EPIPE")||n.emit("error",s)};if(this.stream.on("error",i),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(s){switch(s.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let u=require("net");u.isIP&&u.isIP(r)===0&&(a.servername=r);try{n.stream=vv(a)}catch(c){return n.emit("error",c)}n.attachListeners(n.stream),n.stream.on("error",i),n.emit("sslconnect")})}attachListeners(t){Sv(t,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(ee.requestSsl())}startup(t){this.stream.write(ee.startup(t))}cancel(t,r){this._send(ee.cancel(t,r))}password(t){this._send(ee.password(t))}sendSASLInitialResponseMessage(t,r){this._send(ee.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(ee.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(ee.query(t))}parse(t){this._send(ee.parse(t))}bind(t){this._send(ee.bind(t))}execute(t){this._send(ee.execute(t))}flush(){this.stream.writable&&this.stream.write(Av)}sync(){this._ending=!0,this._send(Ev)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(xv,()=>{this.stream.end()})}close(t){this._send(ee.close(t))}describe(t){this._send(ee.describe(t))}sendCopyFromChunk(t){this._send(ee.copyData(t))}endCopyFrom(){this._send(ee.copyDone())}sendCopyFail(t){this._send(ee.copyFail(t))}};ah.exports=mo});var fh=d((Gx,ch)=>{"use strict";var{Transform:wv}=require("stream"),{StringDecoder:Cv}=require("string_decoder"),Ze=Symbol("last"),Jr=Symbol("decoder");function Ov(e,t,r){let n;if(this.overflow){if(n=this[Jr].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Ze]+=this[Jr].write(e),n=this[Ze].split(this.matcher);this[Ze]=n.pop();for(let i=0;i<n.length;i++)try{lh(this,this.mapper(n[i]))}catch(s){return r(s)}if(this.overflow=this[Ze].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Rv(e){if(this[Ze]+=this[Jr].end(),this[Ze])try{lh(this,this.mapper(this[Ze]))}catch(t){return e(t)}e()}function lh(e,t){t!==void 0&&e.push(t)}function uh(e){return e}function Tv(e,t,r){switch(e=e||/\r?\n/,t=t||uh,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=uh)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=Ov,r.flush=Rv,r.readableObjectMode=!0;let n=new wv(r);return n[Ze]="",n[Jr]=new Cv("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,s){this._writableState.errorEmitted=!1,s(i)},n}ch.exports=Tv});var dh=d((Vx,He)=>{"use strict";var hh=require("path"),Pv=require("stream").Stream,kv=fh(),ph=require("util"),Iv=5432,zr=process.platform==="win32",Kt=process.stderr,Lv=56,Mv=7,Dv=61440,qv=32768;function Fv(e){return(e&Dv)==qv}var Ot=["host","port","database","user","password"],_o=Ot.length,Nv=Ot[_o-1];function yo(){var e=Kt instanceof Pv&&Kt.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);Kt.write(ph.format.apply(ph,t))}}Object.defineProperty(He.exports,"isWin",{get:function(){return zr},set:function(e){zr=e}});He.exports.warnTo=function(e){var t=Kt;return Kt=e,t};He.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(zr?hh.join(t.APPDATA||"./","postgresql","pgpass.conf"):hh.join(t.HOME||"./",".pgpass"));return r};He.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:zr?!0:(t=t||"<unkn>",Fv(e.mode)?e.mode&(Lv|Mv)?(yo('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(yo('WARNING: password file "%s" is not a plain file',t),!1))};var Hv=He.exports.match=function(e,t){return Ot.slice(0,-1).reduce(function(r,n,i){return i==1&&Number(e[n]||Iv)===Number(t[n])?r&&!0:r&&(t[n]==="*"||t[n]===e[n])},!0)};He.exports.getPassword=function(e,t,r){var n,i=t.pipe(kv());function s(u){var c=$v(u);c&&Bv(c)&&Hv(e,c)&&(n=c[Nv],i.end())}var o=function(){t.destroy(),r(n)},a=function(u){t.destroy(),yo("WARNING: error on reading file: %s",u),r(void 0)};t.on("error",a),i.on("data",s).on("end",o).on("error",a)};var $v=He.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s=0,o={},a=!1,u=function(l,f,h){var m=e.substring(f,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),o[Ot[l]]=m},c=0;c<e.length-1;c+=1){if(t=e.charAt(c+1),r=e.charAt(c),a=n==_o-1,a){u(n,i);break}c>=0&&t==":"&&r!=="\\"&&(u(n,i,c+1),i=c+2,n+=1)}return o=Object.keys(o).length===_o?o:null,o},Bv=He.exports.isValidEntry=function(e){for(var t={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<Ot.length;r+=1){var n=t[r],i=e[Ot[r]]||"",s=n(i);if(!s)return!1}return!0}});var gh=d((Yx,So)=>{"use strict";var Wx=require("path"),mh=require("fs"),Xr=dh();So.exports=function(e,t){var r=Xr.getFileName();mh.stat(r,function(n,i){if(n||!Xr.usePgPass(i,r))return t(void 0);var s=mh.createReadStream(r);Xr.getPassword(e,s,t)})};So.exports.warnTo=Xr.warnTo});var vh=d((Kx,bh)=>{"use strict";var jv=require("events").EventEmitter,_h=At(),en=require("util"),bo=qf(),Uv=Qr(),Qv=$s(),Sh=Kf(),Gv=Wt(),Vv=go(),Wv=qs(),yh=en.deprecate(()=>{},"Client.activeQuery is deprecated and will be removed in a future version."),Yv=en.deprecate(()=>{},"Client.queryQueue is deprecated and will be removed in a future version."),Kv=en.deprecate(()=>{},"pgpass support is deprecated and will be removed in a future version. You can provide an async function as the password property to the Client/Pool constructor that returns a password instead. Within this funciton you can call the pgpass module in your own code."),Jv=en.deprecate(()=>{},"Passing a custom Promise implementation to the Client/Pool constructor is deprecated and will be removed in a future version."),Zr=class extends jv{constructor(t){super(),this.connectionParameters=new Qv(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};r.Promise&&Jv(),this._Promise=r.Promise||global.Promise,this._types=new Uv(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this._activeQuery=null,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new Vv({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this._queryQueue=[],this.binary=r.binary||Gv.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}get activeQuery(){return yh(),this._activeQuery}set activeQuery(t){yh(),this._activeQuery=t}_getActiveQuery(){return this._activeQuery}_errorAllQueries(t){let r=i=>{process.nextTick(()=>{i.handleError(t,this.connection)})},n=this._getActiveQuery();n&&(r(n),this._activeQuery=null),this._queryQueue.forEach(r),this._queryQueue.length=0}_connect(t){let r=this,n=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(i)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,n)=>{this._connect(i=>{i?n(i):r(this)})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_getPassword(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;t()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)t();else try{gh()(this.connectionParameters,i=>{i!==void 0&&(Kv(),this.connectionParameters.password=this.password=i),t()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(t){this._getPassword(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._getPassword(async()=>{try{let r=await Wv.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._getPassword(()=>{try{this.saslSession=bo.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await bo.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{bo.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let r=this._getActiveQuery();this._activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this._getActiveQuery();if(!r){this._handleErrorEvent(t);return}this._activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected rowDescription message from backend.");this._handleErrorEvent(n);return}r.handleRowDescription(t)}_handleDataRow(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected dataRow message from backend.");this._handleErrorEvent(n);return}r.handleDataRow(t)}_handlePortalSuspended(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected portalSuspended message from backend.");this._handleErrorEvent(n);return}r.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected emptyQuery message from backend.");this._handleErrorEvent(n);return}r.handleEmptyQuery(this.connection)}_handleCommandComplete(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(n);return}r.handleCommandComplete(t,this.connection)}_handleParseComplete(){let t=this._getActiveQuery();if(t==null){let r=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(r);return}t.name&&(this.connection.parsedStatements[t.name]=t.text)}_handleCopyInResponse(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected copyInResponse message from backend.");this._handleErrorEvent(n);return}r.handleCopyInResponse(this.connection)}_handleCopyData(t){let r=this._getActiveQuery();if(r==null){let n=new Error("Received unexpected copyData message from backend.");this._handleErrorEvent(n);return}r.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},n=t.application_name||t.fallback_application_name;return n&&(r.application_name=n),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(t.processID,t.secretKey)})}else t._queryQueue.indexOf(r)!==-1&&t._queryQueue.splice(t._queryQueue.indexOf(r),1)}setTypeParser(t,r,n){return this._types.setTypeParser(t,r,n)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return _h.escapeIdentifier(t)}escapeLiteral(t){return _h.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0){this._activeQuery=this._queryQueue.shift();let t=this._getActiveQuery();if(t){this.readyForQuery=!1,this.hasExecuted=!0;let r=t.submit(this.connection);r&&process.nextTick(()=>{t.handleError(r,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this._activeQuery=null,this.emit("drain"))}}query(t,r,n){let i,s,o,a,u;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(o=t.query_timeout||this.connectionParameters.query_timeout,s=i=t,typeof r=="function"&&(i.callback=i.callback||r)):(o=t.query_timeout||this.connectionParameters.query_timeout,i=new Sh(t,r,n),i.callback||(s=new this._Promise((c,l)=>{i.callback=(f,h)=>f?l(f):c(h)}).catch(c=>{throw Error.captureStackTrace(c),c}))),o&&(u=i.callback,a=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),u(c),i.callback=()=>{};let l=this._queryQueue.indexOf(i);l>-1&&this._queryQueue.splice(l,1),this._pulseQueryQueue()},o),i.callback=(c,l)=>{clearTimeout(a),u(c,l)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),s):(this._queryQueue.push(i),this._pulseQueryQueue(),s):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),s)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this._getActiveQuery()||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}get queryQueue(){return Yv(),this._queryQueue}};Zr.Query=Sh;bh.exports=Zr});var wh=d((Jx,xh)=>{"use strict";var zv=require("events").EventEmitter,Ah=function(){},Eh=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},vo=class{constructor(t,r,n){this.client=t,this.idleListener=r,this.timeoutId=n}},Rt=class{constructor(t){this.callback=t}};function Xv(){throw new Error("Release called on client which has already been released to the pool.")}function tn(e,t){if(t)return{callback:t,result:void 0};let r,n,i=function(o,a){o?r(o):n(a)},s=new e(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:i,result:s}}function Zv(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}var Ao=class extends zv{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Eo().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let i=r.idleListener;return this._acquireClient(n,t,i,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let n=Eh(this._idle,s=>s.client===t);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(s=>s!==t);let i=this;t.end(()=>{i.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return t?t(i):this.Promise.reject(i)}let r=tn(this.Promise,t),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Rt(r.callback)),n;let i=(a,u,c)=>{clearTimeout(o),r.callback(a,u,c)},s=new Rt(i),o=setTimeout(()=>{Eh(this._pendingQueue,a=>a.callback===i),s.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(s),n}return this.newClient(new Rt(r.callback)),n}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let n=Zv(this,r);this.log("checking client timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(i&&clearTimeout(i),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),s&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),t.timedOut||t.callback(o,void 0,Ah);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(c=>c.client===r)!==-1&&this._acquireClient(r,new Rt((c,l,f)=>f()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,n,!0)}})}_acquireClient(t,r,n,i){i&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,n),t.removeListener("error",n),r.timedOut?i&&this.options.verify?this.options.verify(t,t.release):t.release():i&&this.options.verify?this.options.verify(t,s=>{if(s)return t.release(s),r.callback(s,void 0,Ah);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let n=!1;return i=>{n&&Xv(),n=!0,this._release(t,r,i)}}_release(t,r,n){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",n,t),n||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let s;this.options.idleTimeoutMillis&&this._isAboveMin()&&(s=setTimeout(()=>{this._isAboveMin()&&(this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this)))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&s.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new vo(t,r,s)),this._pulseQueue()}query(t,r,n){if(typeof t=="function"){let s=tn(this.Promise,t);return setImmediate(function(){return s.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),s.result}typeof r=="function"&&(n=r,r=void 0);let i=tn(this.Promise,n);return n=i.callback,this.connect((s,o)=>{if(s)return n(s);let a=!1,u=c=>{a||(a=!0,o.release(c),n(c))};o.once("error",u),this.log("dispatching query");try{o.query(t,r,(c,l)=>{if(this.log("query dispatched"),o.removeListener("error",u),!a)return a=!0,o.release(c),c?n(c):n(void 0,l)})}catch(c){return o.release(c),n(c)}}),i.result}end(t){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return t?t(n):this.Promise.reject(n)}this.ending=!0;let r=tn(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};xh.exports=Ao});var Rh=d((zx,Oh)=>{"use strict";var Ch=require("events").EventEmitter,eA=require("util"),xo=At(),Tt=Oh.exports=function(e,t,r){Ch.call(this),e=xo.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};eA.inherits(Tt,Ch);var tA={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Tt.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let n=tA[r]||r;e[n]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};Tt.prototype.then=function(e,t){return this._getPromise().then(e,t)};Tt.prototype.catch=function(e){return this._getPromise().catch(e)};Tt.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};Tt.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(n,i,s){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),n)return t.handleError(n);t._emitRowEvents&&(s.length>1?i.forEach((o,a)=>{o.forEach(u=>{t.emit("row",u,s[a])})}):i.forEach(function(o){t.emit("row",o,s)})),t.state="end",t.emit("end",s),t.callback&&t.callback(null,s)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(xo.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(i)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,function(i){return i?r(i):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Query values must be an array");return r(i)}let n=this.values.map(xo.prepareValue);e.native.query(this.text,n,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var Lh=d((Xx,Ih)=>{"use strict";var Th;try{Th=require("pg-native")}catch(e){throw e}var rA=Qr(),Ph=require("events").EventEmitter,nA=require("util"),iA=$s(),kh=Rh(),me=Ih.exports=function(e){Ph.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new rA(e.types),this.native=new Th({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new iA(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};me.Query=kh;nA.inherits(me,Ph);me.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};me.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(t.connectionParameters.nativeConnectionString&&(n=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(n,function(i){if(i)return t.native.end(),e(i);t._connected=!0,t.native.on("error",function(s){t._queryable=!1,t._errorAllQueries(s),t.emit("error",s)}),t.native.on("notification",function(s){t.emit("notification",{channel:s.relname,payload:s.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e(null,this)})})};me.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(n=>{n?r(n):t(this)})})};me.prototype.query=function(e,t,r){let n,i,s,o,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,typeof t=="function"&&(e.callback=t);else if(s=e.query_timeout||this.connectionParameters.query_timeout,n=new kh(e,t,r),!n.callback){let u,c;i=new this._Promise((l,f)=>{u=l,c=f}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,f)=>l?c(l):u(f)}return s&&(a=n.callback,o=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),a(u),n.callback=()=>{};let c=this._queryQueue.indexOf(n);c>-1&&this._queryQueue.splice(c,1),this._pulseQueryQueue()},s),n.callback=(u,c)=>{clearTimeout(o),a(u,c)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};me.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(n,i){e=s=>s?i(s):n()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};me.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};me.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};me.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};me.prototype.ref=function(){};me.prototype.unref=function(){};me.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};me.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var wo=d((Zx,Mh)=>{"use strict";Mh.exports=Lh()});var Eo=d((tw,rn)=>{"use strict";var sA=vh(),oA=Wt(),aA=go(),uA=js(),lA=At(),cA=wh(),fA=Qr(),{DatabaseError:hA}=ho(),{escapeIdentifier:pA,escapeLiteral:dA}=At(),mA=e=>class extends cA{constructor(r){super(r,e)}},Dh=function(e){this.defaults=oA,this.Client=e,this.Query=this.Client.Query,this.Pool=mA(this.Client),this._pools=[],this.Connection=aA,this.types=Vt(),this.DatabaseError=hA,this.TypeOverrides=fA,this.escapeIdentifier=pA,this.escapeLiteral=dA,this.Result=uA,this.utils=lA},qh=sA,Fh=!1;try{Fh=!!process.env.NODE_PG_FORCE_NATIVE}catch{}Fh&&(qh=wo());rn.exports=new Dh(qh);Object.defineProperty(rn.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new Dh(wo())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(rn.exports,"native",{value:e}),e}})});var jh=Be(require("fs"),1),Uh=Be(require("path"),1),Qh=Be(gl(),1);var Tl=Be(Rl(),1),{program:WE,createCommand:YE,createArgument:KE,createOption:JE,CommanderError:zE,InvalidArgumentError:XE,InvalidOptionArgumentError:ZE,Command:Pl,Argument:ex,Option:tx,Help:rx}=Tl.default;var Ss=Be(require("fs"),1),Fc=Be(require("path"),1);function Vl(e){return typeof e>"u"||e===null}function S_(e){return typeof e=="object"&&e!==null}function b_(e){return Array.isArray(e)?e:Vl(e)?[]:[e]}function v_(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function A_(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function E_(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var x_=Vl,w_=S_,C_=b_,O_=A_,R_=E_,T_=v_,X={isNothing:x_,isObject:w_,toArray:C_,repeat:O_,isNegativeZero:R_,extend:T_};function Wl(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Ft(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Wl(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ft.prototype=Object.create(Error.prototype);Ft.prototype.constructor=Ft;Ft.prototype.toString=function(t){return this.name+": "+Wl(this,t)};var ue=Ft;function ss(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function os(e,t){return X.repeat(" ",t-e.length)+e}function P_(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(o-u<0);u++)c=ss(e.buffer,n[o-u],i[o-u],e.position-(n[o]-n[o-u]),f),a=X.repeat(" ",t.indent)+os((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=ss(e.buffer,n[o],i[o],e.position,f),a+=X.repeat(" ",t.indent)+os((e.line+1).toString(),l)+" | "+c.str+`
`,a+=X.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(o+u>=i.length);u++)c=ss(e.buffer,n[o+u],i[o+u],e.position-(n[o]-n[o+u]),f),a+=X.repeat(" ",t.indent)+os((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var k_=P_,I_=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],L_=["scalar","sequence","mapping"];function M_(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function D_(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(I_.indexOf(r)===-1)throw new ue('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=M_(t.styleAliases||null),L_.indexOf(this.kind)===-1)throw new ue('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var te=D_;function kl(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function q_(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function us(e){return this.extend(e)}us.prototype.extend=function(t){var r=[],n=[];if(t instanceof te)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ue("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof te))throw new ue("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ue("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ue("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof te))throw new ue("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(us.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=kl(i,"implicit"),i.compiledExplicit=kl(i,"explicit"),i.compiledTypeMap=q_(i.compiledImplicit,i.compiledExplicit),i};var Yl=us,Kl=new te("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Jl=new te("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),zl=new te("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Xl=new Yl({explicit:[Kl,Jl,zl]});function F_(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function N_(){return null}function H_(e){return e===null}var Zl=new te("tag:yaml.org,2002:null",{kind:"scalar",resolve:F_,construct:N_,predicate:H_,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function $_(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function B_(e){return e==="true"||e==="True"||e==="TRUE"}function j_(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var ec=new te("tag:yaml.org,2002:bool",{kind:"scalar",resolve:$_,construct:B_,predicate:j_,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function U_(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Q_(e){return 48<=e&&e<=55}function G_(e){return 48<=e&&e<=57}function V_(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!U_(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Q_(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!G_(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function W_(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Y_(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!X.isNegativeZero(e)}var tc=new te("tag:yaml.org,2002:int",{kind:"scalar",resolve:V_,construct:W_,predicate:Y_,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),K_=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function J_(e){return!(e===null||!K_.test(e)||e[e.length-1]==="_")}function z_(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var X_=/^[-+]?[0-9]+e/;function Z_(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(X.isNegativeZero(e))return"-0.0";return r=e.toString(10),X_.test(r)?r.replace("e",".e"):r}function ey(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||X.isNegativeZero(e))}var rc=new te("tag:yaml.org,2002:float",{kind:"scalar",resolve:J_,construct:z_,predicate:ey,represent:Z_,defaultStyle:"lowercase"}),nc=Xl.extend({implicit:[Zl,ec,tc,rc]}),ic=nc,sc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),oc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ty(e){return e===null?!1:sc.exec(e)!==null||oc.exec(e)!==null}function ry(e){var t,r,n,i,s,o,a,u=0,c=null,l,f,h;if(t=sc.exec(e),t===null&&(t=oc.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],f=+(t[11]||0),c=(l*60+f)*6e4,t[9]==="-"&&(c=-c)),h=new Date(Date.UTC(r,n,i,s,o,a,u)),c&&h.setTime(h.getTime()-c),h}function ny(e){return e.toISOString()}var ac=new te("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ty,construct:ry,instanceOf:Date,represent:ny});function iy(e){return e==="<<"||e===null}var uc=new te("tag:yaml.org,2002:merge",{kind:"scalar",resolve:iy}),ps=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function sy(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=ps;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function oy(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=ps,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function ay(e){var t="",r=0,n,i,s=e.length,o=ps;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function uy(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var lc=new te("tag:yaml.org,2002:binary",{kind:"scalar",resolve:sy,construct:oy,predicate:uy,represent:ay}),ly=Object.prototype.hasOwnProperty,cy=Object.prototype.toString;function fy(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,cy.call(i)!=="[object Object]")return!1;for(s in i)if(ly.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function hy(e){return e!==null?e:[]}var cc=new te("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fy,construct:hy}),py=Object.prototype.toString;function dy(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],py.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function my(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var fc=new te("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:dy,construct:my}),gy=Object.prototype.hasOwnProperty;function _y(e){if(e===null)return!0;var t,r=e;for(t in r)if(gy.call(r,t)&&r[t]!==null)return!1;return!0}function yy(e){return e!==null?e:{}}var hc=new te("tag:yaml.org,2002:set",{kind:"mapping",resolve:_y,construct:yy}),ds=ic.extend({implicit:[ac,uc],explicit:[lc,cc,fc,hc]}),Je=Object.prototype.hasOwnProperty,Lr=1,pc=2,dc=3,Mr=4,as=1,Sy=2,Il=3,by=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vy=/[\x85\u2028\u2029]/,Ay=/[,\[\]\{\}]/,mc=/^(?:!|!!|![a-z\-]+!)$/i,gc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ll(e){return Object.prototype.toString.call(e)}function Me(e){return e===10||e===13}function st(e){return e===9||e===32}function he(e){return e===9||e===32||e===10||e===13}function gt(e){return e===44||e===91||e===93||e===123||e===125}function Ey(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function xy(e){return e===120?2:e===117?4:e===85?8:0}function wy(e){return 48<=e&&e<=57?e-48:-1}function Ml(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Cy(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function _c(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var yc=new Array(256),Sc=new Array(256);for(it=0;it<256;it++)yc[it]=Ml(it)?1:0,Sc[it]=Ml(it);var it;function Oy(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||ds,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bc(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=k_(r),new ue(t,r)}function O(e,t){throw bc(e,t)}function Dr(e,t){e.onWarning&&e.onWarning.call(null,bc(e,t))}var Dl={YAML:function(t,r,n){var i,s,o;t.version!==null&&O(t,"duplication of %YAML directive"),n.length!==1&&O(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&O(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&O(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Dr(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&O(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],mc.test(i)||O(t,"ill-formed tag handle (first argument) of the TAG directive"),Je.call(t.tagMap,i)&&O(t,'there is a previously declared suffix for "'+i+'" tag handle'),gc.test(s)||O(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{O(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function Ke(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||O(e,"expected valid JSON character");else by.test(a)&&O(e,"the stream contains non-printable characters");e.result+=a}}function ql(e,t,r,n){var i,s,o,a;for(X.isObject(r)||O(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Je.call(t,s)||(_c(t,s,r[s]),n[s]=!0)}function _t(e,t,r,n,i,s,o,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&O(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Ll(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Ll(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)ql(e,t,s[c],r);else ql(e,t,s,r);else!e.json&&!Je.call(r,i)&&Je.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,O(e,"duplicated mapping key")),_c(t,i,s),delete r[i];return t}function ms(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):O(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function K(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;st(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Me(i))for(ms(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Dr(e,"deficient indentation"),n}function Nr(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||he(r)))}function gs(e,t){t===1?e.result+=" ":t>1&&(e.result+=X.repeat(`
`,t-1))}function Ry(e,t,r){var n,i,s,o,a,u,c,l,f=e.kind,h=e.result,m;if(m=e.input.charCodeAt(e.position),he(m)||gt(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),he(i)||r&&gt(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),he(i)||r&&gt(i))break}else if(m===35){if(n=e.input.charCodeAt(e.position-1),he(n))break}else{if(e.position===e.lineStart&&Nr(e)||r&&gt(m))break;if(Me(m))if(u=e.line,c=e.lineStart,l=e.lineIndent,K(e,!1,-1),e.lineIndent>=t){a=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(Ke(e,s,o,!1),gs(e,e.line-u),s=o=e.position,a=!1),st(m)||(o=e.position+1),m=e.input.charCodeAt(++e.position)}return Ke(e,s,o,!1),e.result?!0:(e.kind=f,e.result=h,!1)}function Ty(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Ke(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Me(r)?(Ke(e,n,i,!0),gs(e,K(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Nr(e)?O(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);O(e,"unexpected end of the stream within a single quoted scalar")}function Py(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Ke(e,r,e.position,!0),e.position++,!0;if(a===92){if(Ke(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Me(a))K(e,!1,t);else if(a<256&&yc[a])e.result+=Sc[a],e.position++;else if((o=xy(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=Ey(a))>=0?s=(s<<4)+o:O(e,"expected hexadecimal character");e.result+=Cy(s),e.position++}else O(e,"unknown escape sequence");r=n=e.position}else Me(a)?(Ke(e,r,n,!0),gs(e,K(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Nr(e)?O(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}O(e,"unexpected end of the stream within a double quoted scalar")}function ky(e,t){var r=!0,n,i,s,o=e.tag,a,u=e.anchor,c,l,f,h,m,p=Object.create(null),y,x,C,v;if(v=e.input.charCodeAt(e.position),v===91)l=93,m=!1,a=[];else if(v===123)l=125,m=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(K(e,!0,t),v=e.input.charCodeAt(e.position),v===l)return e.position++,e.tag=o,e.anchor=u,e.kind=m?"mapping":"sequence",e.result=a,!0;r?v===44&&O(e,"expected the node content, but found ','"):O(e,"missed comma between flow collection entries"),x=y=C=null,f=h=!1,v===63&&(c=e.input.charCodeAt(e.position+1),he(c)&&(f=h=!0,e.position++,K(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,yt(e,t,Lr,!1,!0),x=e.tag,y=e.result,K(e,!0,t),v=e.input.charCodeAt(e.position),(h||e.line===n)&&v===58&&(f=!0,v=e.input.charCodeAt(++e.position),K(e,!0,t),yt(e,t,Lr,!1,!0),C=e.result),m?_t(e,a,p,x,y,C,n,i,s):f?a.push(_t(e,null,p,x,y,C,n,i,s)):a.push(y),K(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(r=!0,v=e.input.charCodeAt(++e.position)):r=!1}O(e,"unexpected end of the stream within a flow collection")}function Iy(e,t){var r,n,i=as,s=!1,o=!1,a=t,u=0,c=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)as===i?i=f===43?Il:Sy:O(e,"repeat of a chomping mode identifier");else if((l=wy(f))>=0)l===0?O(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?O(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(st(f)){do f=e.input.charCodeAt(++e.position);while(st(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Me(f)&&f!==0)}for(;f!==0;){for(ms(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Me(f)){u++;continue}if(e.lineIndent<a){i===Il?e.result+=X.repeat(`
`,s?1+u:u):i===as&&s&&(e.result+=`
`);break}for(n?st(f)?(c=!0,e.result+=X.repeat(`
`,s?1+u:u)):c?(c=!1,e.result+=X.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=X.repeat(`
`,u):e.result+=X.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,r=e.position;!Me(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Ke(e,r,e.position,!1)}return!0}function Fl(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,O(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!he(o))));){if(a=!0,e.position++,K(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,yt(e,t,dc,!1,!0),s.push(e.result),K(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)O(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function Ly(e,t,r){var n,i,s,o,a,u,c=e.tag,l=e.anchor,f={},h=Object.create(null),m=null,p=null,y=null,x=!1,C=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),v=e.input.charCodeAt(e.position);v!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,O(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(v===63||v===58)&&he(n))v===63?(x&&(_t(e,f,h,m,p,null,o,a,u),m=p=y=null),C=!0,x=!0,i=!0):x?(x=!1,i=!0):O(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=n;else{if(o=e.line,a=e.lineStart,u=e.position,!yt(e,r,pc,!1,!0))break;if(e.line===s){for(v=e.input.charCodeAt(e.position);st(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),he(v)||O(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(_t(e,f,h,m,p,null,o,a,u),m=p=y=null),C=!0,x=!1,i=!1,m=e.tag,p=e.result;else if(C)O(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(C)O(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===s||e.lineIndent>t)&&(x&&(o=e.line,a=e.lineStart,u=e.position),yt(e,t,Mr,!0,i)&&(x?p=e.result:y=e.result),x||(_t(e,f,h,m,p,y,o,a,u),m=p=y=null),K(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&v!==0)O(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&_t(e,f,h,m,p,null,o,a,u),C&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=f),C}function My(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&O(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):O(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!he(o);)o===33&&(n?O(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),mc.test(i)||O(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Ay.test(s)&&O(e,"tag suffix cannot contain flow indicator characters")}s&&!gc.test(s)&&O(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{O(e,"tag name is malformed: "+s)}return r?e.tag=s:Je.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:O(e,'undeclared tag handle "'+i+'"'),!0}function Dy(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&O(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!he(r)&&!gt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function qy(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!he(n)&&!gt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Je.call(e.anchorMap,r)||O(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],K(e,!0,-1),!0}function yt(e,t,r,n,i){var s,o,a,u=1,c=!1,l=!1,f,h,m,p,y,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Mr===r||dc===r,n&&K(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;My(e)||Dy(e);)K(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||Mr===r)&&(Lr===r||pc===r?y=t:y=t+1,x=e.position-e.lineStart,u===1?a&&(Fl(e,x)||Ly(e,x,y))||ky(e,y)?l=!0:(o&&Iy(e,y)||Ty(e,y)||Py(e,y)?l=!0:qy(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&O(e,"alias node should not have any properties")):Ry(e,y,Lr===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&Fl(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&O(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if(p=e.implicitTypes[f],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Je.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,m=e.typeMap.multi[e.kind||"fallback"],f=0,h=m.length;f<h;f+=1)if(e.tag.slice(0,m[f].tag.length)===m[f].tag){p=m[f];break}p||O(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&O(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):O(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function Fy(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(K(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!he(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&O(e,"directive name must not be less than one character in length");o!==0;){for(;st(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Me(o));break}if(Me(o))break;for(r=e.position;o!==0&&!he(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&ms(e),Je.call(Dl,n)?Dl[n](e,n,i):Dr(e,'unknown document directive "'+n+'"')}if(K(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,K(e,!0,-1)):s&&O(e,"directives end mark is expected"),yt(e,e.lineIndent-1,Mr,!1,!0),K(e,!0,-1),e.checkLineBreaks&&vy.test(e.input.slice(t,e.position))&&Dr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Nr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,K(e,!0,-1));return}if(e.position<e.length-1)O(e,"end of the stream or a document separator is expected");else return}function vc(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Oy(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,O(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Fy(r);return r.documents}function Ny(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=vc(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function Hy(e,t){var r=vc(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ue("expected a single document in the stream, but found more")}}var $y=Ny,By=Hy,Ac={loadAll:$y,load:By},Ec=Object.prototype.toString,xc=Object.prototype.hasOwnProperty,_s=65279,jy=9,Nt=10,Uy=13,Qy=32,Gy=33,Vy=34,ls=35,Wy=37,Yy=38,Ky=39,Jy=42,wc=44,zy=45,qr=58,Xy=61,Zy=62,e0=63,t0=64,Cc=91,Oc=93,r0=96,Rc=123,n0=124,Tc=125,se={};se[0]="\\0";se[7]="\\a";se[8]="\\b";se[9]="\\t";se[10]="\\n";se[11]="\\v";se[12]="\\f";se[13]="\\r";se[27]="\\e";se[34]='\\"';se[92]="\\\\";se[133]="\\N";se[160]="\\_";se[8232]="\\L";se[8233]="\\P";var i0=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],s0=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function o0(e,t){var r,n,i,s,o,a,u;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&xc.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[o]=a;return r}function a0(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ue("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+X.repeat("0",n-t.length)+t}var u0=1,Ht=2;function l0(e){this.schema=e.schema||ds,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=X.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=o0(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ht:u0,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Nl(e,t){for(var r=X.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function cs(e,t){return`
`+X.repeat(" ",e.indent*t)}function c0(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Fr(e){return e===Qy||e===jy}function $t(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==_s||65536<=e&&e<=1114111}function Hl(e){return $t(e)&&e!==_s&&e!==Uy&&e!==Nt}function $l(e,t,r){var n=Hl(e),i=n&&!Fr(e);return(r?n:n&&e!==wc&&e!==Cc&&e!==Oc&&e!==Rc&&e!==Tc)&&e!==ls&&!(t===qr&&!i)||Hl(t)&&!Fr(t)&&e===ls||t===qr&&i}function f0(e){return $t(e)&&e!==_s&&!Fr(e)&&e!==zy&&e!==e0&&e!==qr&&e!==wc&&e!==Cc&&e!==Oc&&e!==Rc&&e!==Tc&&e!==ls&&e!==Yy&&e!==Jy&&e!==Gy&&e!==n0&&e!==Xy&&e!==Zy&&e!==Ky&&e!==Vy&&e!==Wy&&e!==t0&&e!==r0}function h0(e){return!Fr(e)&&e!==qr}function qt(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Pc(e){var t=/^\n* /;return t.test(e)}var kc=1,fs=2,Ic=3,Lc=4,mt=5;function p0(e,t,r,n,i,s,o,a){var u,c=0,l=null,f=!1,h=!1,m=n!==-1,p=-1,y=f0(qt(e,0))&&h0(qt(e,e.length-1));if(t||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=qt(e,u),!$t(c))return mt;y=y&&$l(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=qt(e,u),c===Nt)f=!0,m&&(h=h||u-p-1>n&&e[p+1]!==" ",p=u);else if(!$t(c))return mt;y=y&&$l(c,l,a),l=c}h=h||m&&u-p-1>n&&e[p+1]!==" "}return!f&&!h?y&&!o&&!i(e)?kc:s===Ht?mt:fs:r>9&&Pc(e)?mt:o?s===Ht?mt:fs:h?Lc:Ic}function d0(e,t,r,n,i){e.dump=(function(){if(t.length===0)return e.quotingType===Ht?'""':"''";if(!e.noCompatMode&&(i0.indexOf(t)!==-1||s0.test(t)))return e.quotingType===Ht?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return c0(e,c)}switch(p0(t,a,e.indent,o,u,e.quotingType,e.forceQuotes&&!n,i)){case kc:return t;case fs:return"'"+t.replace(/'/g,"''")+"'";case Ic:return"|"+Bl(t,e.indent)+jl(Nl(t,s));case Lc:return">"+Bl(t,e.indent)+jl(Nl(m0(t,o),s));case mt:return'"'+g0(t)+'"';default:throw new ue("impossible error: invalid scalar style")}})()}function Bl(e,t){var r=Pc(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function jl(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function m0(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,Ul(e.slice(0,c),t)})(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],u=o[2];s=u[0]===" ",n+=a+(!i&&!s&&u!==""?`
`:"")+Ul(u,t),i=s}return n}function Ul(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,u="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,u+=`
`+e.slice(i,s),i=s+1),o=a;return u+=`
`,e.length-i>t&&o>i?u+=e.slice(i,o)+`
`+e.slice(o+1):u+=e.slice(i),u.slice(1)}function g0(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=qt(e,i),n=se[r],!n&&$t(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||a0(r);return t}function _0(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(Ne(e,t,a,!1,!1)||typeof a>"u"&&Ne(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Ql(e,t,r,n){var i="",s=e.tag,o,a,u;for(o=0,a=r.length;o<a;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Ne(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Ne(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=cs(e,t)),e.dump&&Nt===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function y0(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,u,c,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=s[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),Ne(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ne(e,t,c,!1,!1)&&(l+=e.dump,n+=l));e.tag=i,e.dump="{"+n+"}"}function S0(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,u,c,l,f,h;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new ue("sortKeys must be a boolean or a function");for(a=0,u=o.length;a<u;a+=1)h="",(!n||i!=="")&&(h+=cs(e,t)),c=o[a],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),Ne(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Nt===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,f&&(h+=cs(e,t)),Ne(e,t+1,l,!0,f)&&(e.dump&&Nt===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,i+=h));e.tag=s,e.dump=i||"{}"}function Gl(e,t,r){var n,i,s,o,a,u;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,Ec.call(a.represent)==="[object Function]")n=a.represent(t,u);else if(xc.call(a.represent,u))n=a.represent[u](t,u);else throw new ue("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function Ne(e,t,r,n,i,s,o){e.tag=null,e.dump=r,Gl(e,r,!1)||Gl(e,r,!0);var a=Ec.call(e.dump),u=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",f,h;if(l&&(f=e.duplicates.indexOf(r),h=f!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(i=!1),h&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(l&&h&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(S0(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(y0(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Ql(e,t-1,e.dump,i):Ql(e,t,e.dump,i),h&&(e.dump="&ref_"+f+e.dump)):(_0(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&d0(e,e.dump,t,s,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new ue("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function b0(e,t){var r=[],n=[],i,s;for(hs(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function hs(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)hs(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)hs(e[n[i]],t,r)}function v0(e,t){t=t||{};var r=new l0(t);r.noRefs||b0(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ne(r,0,n,!0,!0)?r.dump+`
`:""}var A0=v0,E0={dump:A0};function ys(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var x0=te,w0=Yl,C0=Xl,O0=nc,R0=ic,T0=ds,P0=Ac.load,k0=Ac.loadAll,I0=E0.dump,L0=ue,M0={binary:lc,float:rc,map:zl,null:Zl,pairs:fc,set:hc,timestamp:ac,bool:ec,int:tc,merge:uc,omap:cc,seq:Jl,str:Kl},D0=ys("safeLoad","load"),q0=ys("safeLoadAll","loadAll"),F0=ys("safeDump","dump"),Hr={Type:x0,Schema:w0,FAILSAFE_SCHEMA:C0,JSON_SCHEMA:O0,CORE_SCHEMA:R0,DEFAULT_SCHEMA:T0,load:P0,loadAll:k0,dump:I0,YAMLException:L0,types:M0,safeLoad:D0,safeLoadAll:q0,safeDump:F0};function N0(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}var H0=/\$\{([A-Z0-9_]+)\}/g;function pe(e){if(typeof e=="string")return e.replace(H0,(t,r)=>process.env[r]??"");if(Array.isArray(e))return e.map(pe);if(N0(e)){let t={};for(let[r,n]of Object.entries(e))t[r]=pe(n);return t}return e}function j(e){throw new Error(e)}function Z(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function $0(e){let t=Ss.default.readFileSync(e,"utf8");if(e.endsWith(".yml")||e.endsWith(".yaml"))return Hr.load(t);if(e.endsWith(".json"))return JSON.parse(t);j(`Unsupported file type: ${e}`)}function Mc(e,t){Z(e)||j(`Scenario ${t}: http must be object.`);let r=String(e.method||"").toUpperCase(),n=String(e.path||"");return r||j(`Scenario ${t}: http.method is required.`),n.startsWith("/")||j(`Scenario ${t}: http.path must start with "/".`),{method:r,path:String(pe(n)),headers:Z(e.headers)?pe(e.headers):void 0,query:Z(e.query)?pe(e.query):void 0,body:pe(e.body)}}function Dc(e,t){Z(e)||j(`Scenario ${t}: exec must be object.`);let r=String(e.run||"").trim();return r||j(`Scenario ${t}: exec.run is required.`),{run:String(pe(r)),cwd:typeof e.cwd=="string"?String(pe(e.cwd)):void 0,env:Z(e.env)?pe(e.env):void 0,timeout_ms:typeof e.timeout_ms=="number"?e.timeout_ms:void 0,retries:typeof e.retries=="number"?e.retries:void 0}}function qc(e,t){Z(e)||j(`Scenario ${t}: sql must be object.`),String(e.driver||"")!=="postgres"&&j(`Scenario ${t}: sql.driver must be "postgres".`);let n=String(e.url_env||"").trim(),i=String(e.query||"").trim();return n||j(`Scenario ${t}: sql.url_env is required.`),i||j(`Scenario ${t}: sql.query is required.`),{driver:"postgres",url_env:String(pe(n)),query:String(pe(i)),timeout_ms:typeof e.timeout_ms=="number"?e.timeout_ms:void 0}}function B0(e){Z(e)||j("Scenario must be an object.");let t=String(e.id||"").trim();t||j("Scenario id required.");let r=Z(e.expect)?pe(e.expect):void 0;if(Array.isArray(e.steps)){let n=e.steps.map((i,s)=>{Z(i)||j(`Scenario ${t}: steps[${s}] must be object.`);let o=Z(i.expect)?pe(i.expect):void 0;if(Z(i.http))return{http:Mc(i.http,t),expect:o};if(Z(i.exec))return{exec:Dc(i.exec,t),expect:o};if(Z(i.sql))return{sql:qc(i.sql,t),expect:o};j(`Scenario ${t}: steps[${s}] must include one of {http|exec|sql}.`)});return{id:t,steps:n}}if(Z(e.http))return{id:t,steps:[{http:Mc(e.http,t),expect:r}]};if(Z(e.exec))return{id:t,steps:[{exec:Dc(e.exec,t),expect:r}]};if(Z(e.sql))return{id:t,steps:[{sql:qc(e.sql,t),expect:r}]};j(`Scenario ${t}: must contain steps[] or one of {http|exec|sql}.`)}function bs(e){let t=Fc.default.resolve(process.cwd(),e);Ss.default.existsSync(t)||j(`Suite file not found: ${t}`);let r=$0(t);Z(r)||j("Suite file must be an object."),r.version!==1&&j(`Unsupported version: ${String(r.version)} (expected 1)`),(typeof r.suite!="string"||!r.suite.trim())&&j("suite must be a string."),(!Array.isArray(r.contracts)||r.contracts.length===0)&&j("contracts must be a non-empty array.");let n=r.contracts.map((i,s)=>{Z(i)||j(`contracts[${s}] must be an object.`),(typeof i.name!="string"||!i.name.trim())&&j(`contracts[${s}].name must string.`),(!Array.isArray(i.scenarios)||i.scenarios.length===0)&&j(`contracts[${s}].scenarios must be non-empty array.`);let o=i.scenarios.map(u=>B0(u)),a=new Set;for(let u of o)a.has(u.id)&&j(`Duplicate scenario id in contract "${i.name}": ${u.id}`),a.add(u.id);return{name:i.name,scenarios:o}});return{version:1,suite:r.suite,contracts:n}}function Nc(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function St(e,t){if(t===null||typeof t!="object")return Object.is(e,t);if(Array.isArray(t)){if(!Array.isArray(e)||t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(!St(e[r],t[r]))return!1;return!0}if(Nc(t)){if(!Nc(e))return!1;for(let r of Object.keys(t))if(!(r in e)||!St(e[r],t[r]))return!1;return!0}return!1}function j0(e,t){let r=e.replace(/\/+$/,""),n=t.startsWith("/")?t:`/${t}`;return`${r}${n}`}function U0(e,t){if(!t)return e;let r=new URL(e);for(let[n,i]of Object.entries(t))r.searchParams.set(n,String(i));return r.toString()}async function Q0(e,t,r){let n=new AbortController,i=setTimeout(()=>n.abort(),r);try{return await fetch(e,{...t,signal:n.signal})}finally{clearTimeout(i)}}async function Hc(e,t,r){let n=t.method.toUpperCase(),i=U0(j0(e,t.path),t.query),s=[],o={...t.headers||{}},a;t.body!==void 0&&t.body!==null&&(typeof t.body=="string"?a=t.body:(a=JSON.stringify(t.body),o["content-type"]||(o["content-type"]="application/json")));let u=Number(process.env.STONEY_TIMEOUT_MS||15e3),c=Number(process.env.STONEY_RETRIES||2),l;for(let f=0;f<=c;f++)try{let h=await Q0(i,{method:n,headers:o,body:a},u),m=h.status,p=await h.text(),y;if((h.headers.get("content-type")||"").includes("application/json"))try{y=JSON.parse(p)}catch{s.push("Response advertised JSON but failed to parse JSON.")}let C=!0,v=r||{};return typeof v.status=="number"&&m!==v.status&&(C=!1,s.push(`Expected status ${v.status} but got ${m}.`)),typeof v.bodyContains=="string"&&!p.includes(v.bodyContains)&&(C=!1,s.push(`Expected body to contain: "${v.bodyContains}"`)),v.json!==void 0&&(y===void 0?(C=!1,s.push("Expected JSON subset match, but response was not JSON.")):St(y,v.json)||(C=!1,s.push("Expected JSON subset did not match response JSON."))),{ok:C,kind:"http",title:`http ${n} ${t.path}`,status:m,method:n,url:i,notes:s}}catch(h){if(l=h,f<c){let m=500*(f+1);await new Promise(p=>setTimeout(p,m));continue}}return{ok:!1,kind:"http",title:`http ${n} ${t.path}`,method:n,url:i,notes:[`Network/timeout error: ${l?.message||String(l)}`]}}var $c=require("child_process"),Bc=Be(require("path"),1);function G0(e){return new Promise(t=>setTimeout(t,e))}async function jc(e,t){let r=[],n=`exec ${e.run}`,i=typeof e.timeout_ms=="number"?e.timeout_ms:Number(process.env.STONEY_TIMEOUT_MS||15e3),s=typeof e.retries=="number"?e.retries:0,o=e.cwd?Bc.default.resolve(process.cwd(),e.cwd):process.cwd(),a;for(let u=0;u<=s;u++)try{let c=await new Promise((h,m)=>{let p=(0,$c.spawn)(e.run,{cwd:o,shell:!0,env:{...process.env,...e.env||{}},stdio:["ignore","pipe","pipe"]}),y="",x="";p.stdout?.on("data",v=>y+=v.toString()),p.stderr?.on("data",v=>x+=v.toString());let C=setTimeout(()=>{p.kill("SIGKILL"),m(new Error(`exec timeout after ${i}ms`))},i);p.on("error",v=>{clearTimeout(C),m(v)}),p.on("close",v=>{clearTimeout(C),h({code:v,stdout:y,stderr:x})})}),l=!0,f=typeof t?.exit_code=="number"?t.exit_code:0;return c.code!==f&&(l=!1,r.push(`Expected exit_code ${f} but got ${c.code}.`)),typeof t?.stdout_contains=="string"&&!c.stdout.includes(t.stdout_contains)&&(l=!1,r.push(`Expected stdout to contain: "${t.stdout_contains}"`)),typeof t?.stderr_contains=="string"&&!c.stderr.includes(t.stderr_contains)&&(l=!1,r.push(`Expected stderr to contain: "${t.stderr_contains}"`)),{ok:l,kind:"exec",title:n,notes:r}}catch(c){if(a=c,u<s){await G0(500*(u+1));continue}}return{ok:!1,kind:"exec",title:n,notes:[`Exec error: ${a?.message||String(a)}`]}}var be=Be(Eo(),1),rw=be.default.Client,nw=be.default.Pool,iw=be.default.Connection,sw=be.default.types,ow=be.default.Query,aw=be.default.DatabaseError,uw=be.default.escapeIdentifier,lw=be.default.escapeLiteral,cw=be.default.Result,fw=be.default.TypeOverrides,hw=be.default.defaults,Nh=be.default;var{Client:gA}=Nh;async function Hh(e,t){let r=`sql postgres (${e.url_env})`,n=[],i=process.env[e.url_env];if(!i)return{ok:!1,kind:"sql",title:r,notes:[`Missing env var ${e.url_env}. Add it as a GitHub Secret and pass it to the Action.`]};let s=typeof e.timeout_ms=="number"?e.timeout_ms:Number(process.env.STONEY_TIMEOUT_MS||15e3),o=new gA({connectionString:i});try{await o.connect();let a=setTimeout(()=>{n.push(`SQL timeout after ${s}ms`),o.end().catch(()=>{})},s),u=await o.query(e.query);clearTimeout(a);let c=!0,l=t||{};if(typeof l.rows=="number"&&u.rowCount!==l.rows&&(c=!1,n.push(`Expected rows ${l.rows} but got ${u.rowCount}.`)),l.equals!==void 0){let f=u.rows?.[0];f?St(f,l.equals)||(c=!1,n.push("Expected SQL first-row subset did not match.")):(c=!1,n.push("Expected equals match against first row, but query returned no rows."))}return{ok:c,kind:"sql",title:r,notes:n}}catch(a){return{ok:!1,kind:"sql",title:r,notes:[`SQL error: ${a?.message||String(a)}`]}}finally{await o.end().catch(()=>{})}}function $h(e,t){if(!e)return;if(e.type==="text"&&typeof e.text=="string"&&t.push(e.text),e.type==="codeBlock"){let n=[],i=Array.isArray(e.content)?e.content:[];for(let s of i)s.type==="text"&&typeof s.text=="string"&&n.push(s.text);t.push("\n```"+(e.attrs?.language||"")+`
`+n.join("")+"\n```\n")}let r=Array.isArray(e.content)?e.content:[];for(let n of r)$h(n,t)}function _A(e){let t=/```(stoney|yaml|yml)\s*\n([\s\S]*?)\n```/i,r=e.match(t);return r?r[2].trim():null}async function Bh(e){let t=(process.env.JIRA_BASE_URL||"").replace(/\/+$/,""),r=process.env.JIRA_EMAIL||"",n=process.env.JIRA_API_TOKEN||"";if(!t||!r||!n)throw new Error("Missing JIRA_BASE_URL/JIRA_EMAIL/JIRA_API_TOKEN env vars (required to load suite from Jira).");let i=Buffer.from(`${r}:${n}`).toString("base64"),s=`${t}/rest/api/3/issue/${encodeURIComponent(e)}?fields=summary,description`,o=await fetch(s,{headers:{authorization:`Basic ${i}`,accept:"application/json"}});if(!o.ok){let p=await o.text();throw new Error(`Jira fetch failed (${o.status}): ${p}`)}let a=await o.json(),u=a?.fields?.summary||e,c=a?.fields?.description,l=[];$h(c,l);let f=l.join(""),h=_A(f);if(!h)throw new Error(`No \`\`\`stoney / \`\`\`yaml fenced code block found in Jira issue ${e} (${u}).`);return Hr.load(h)}var Jt=new Pl;Jt.name("stoney").description("Stoney \u2014 run contracts in CI.").version("0.0.1");Jt.command("hello").action(()=>console.log("\u{1FAA8} Stoney is alive."));Jt.command("parse").argument("<file>","Suite file (.yml/.yaml or .json)").option("--pretty","Pretty-print JSON").action((e,t)=>{let r=bs(e);console.log(t.pretty?JSON.stringify(r,null,2):JSON.stringify(r))});function yA(e){return Array.isArray(e.steps)&&e.steps.length?e.steps:[]}async function SA(e,t){return"http"in t?e?Hc(e,t.http,t.expect):{ok:!1,kind:"http",title:`http ${t.http.method} ${t.http.path}`,notes:["Missing base URL. Provide --base-url or set STONEY_BASE_URL."]}:"exec"in t?jc(t.exec,t.expect):"sql"in t?Hh(t.sql,t.expect):{ok:!1,kind:"exec",title:"unknown",notes:["Unknown step type."]}}Jt.command("run").requiredOption("--suite <glob>","Suite file path or glob (e.g. contracts/*.yml)").option("--jira-issue <key>","Jira issue key containing a ```stoney or ```yaml fenced suite (repeatable)",(e,t)=>t?[...t,e]:[e],[]).option("--base-url <url>","Base URL (defaults to STONEY_BASE_URL env var)").option("--report <path>","JSON report output path","stoney-report.json").option("--only-contract <name>","Run only one contract by name").option("--only-scenario <id>","Run only one scenario id").option("--fail-fast","Stop on first failure",!1).action(async e=>{let t=e.baseUrl||process.env.STONEY_BASE_URL,r=await(0,Qh.default)(e.suite),n=[];for(let l of r)n.push(bs(l));let i=Array.isArray(e.jiraIssue)?e.jiraIssue:[];for(let l of i){let f=await Bh(l);if(!f||typeof f!="object")throw new Error(`Jira suite ${l} did not parse to an object.`);n.push(f)}n.length||(console.error(`No suite files matched: ${e.suite} and no Jira issues provided.`),process.exit(2));let s=0,o=0,a=[];console.log(`
\u{1FAA8} Stoney run`),t&&console.log(`Base URL: ${t}`),console.log(`Suites loaded: ${n.length}
`);for(let l of n){for(let f of l.contracts)if(!(e.onlyContract&&f.name!==e.onlyContract)){console.log(`Suite: ${l.suite}  Contract: ${f.name}`);for(let h of f.scenarios){if(e.onlyScenario&&h.id!==e.onlyScenario)continue;o++;let m=yA(h),p=!0,y=[],x=[],C,v,L;for(let $ of m){let w=await SA(t,$);if(y.push(w),w.kind==="http"&&w.method&&w.url&&(C=w.method,v=w.url,L=w.status),!w.ok){p=!1,x.push(`${w.title}`);for(let I of w.notes)x.push(`- ${I}`);if(e.failFast)break}}let re={id:h.id,ok:p,method:C,url:v,status:L,notes:x,steps:y};if(a.push({suite:l.suite,contract:f.name,...re}),p)console.log(`  \u2705 ${h.id}`);else{s++,console.log(`  \u274C ${h.id}`);for(let $ of y.filter(w=>!w.ok)){console.log(`     ${$.title}`);for(let w of $.notes)console.log(`     - ${w}`)}if(e.failFast)break}}if(console.log(""),e.failFast&&s>0)break}if(e.failFast&&s>0)break}let u={baseUrl:t||"",total:o,failed:s,passed:o-s,ok:s===0,results:a},c=Uh.default.resolve(process.cwd(),e.report);jh.default.writeFileSync(c,JSON.stringify(u,null,2),"utf8"),console.log(`Report written: ${c}`),process.exit(s===0?0:1)});Jt.parse(process.argv);
/*! Bundled license information:

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT *)
*/
